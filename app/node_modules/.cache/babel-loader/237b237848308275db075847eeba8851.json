{"ast":null,"code":"var _jsxFileName = \"/home/ubuntu/Connor/WorkOSU/app/src/pages/MainPages/Settings/index.js\";\nimport React, { Component } from \"react\";\nimport CollapseWithHeader from \"../../../components/CollapseWithHeader\";\nimport QRCode from \"qrcode\";\nimport swal from \"sweetalert\";\nimport \"./scss/settings.scss\";\nimport { AffordableClient, AffordableHttpError } from \"affordable-client\";\nimport BankingInfoTab from \"./BankingInfoTab\";\nimport { AddTwoFactorComponent, ValidateTwoFactorComponent } from \"../../../components/TwoFactor/TwoFactor\";\n\nvar speakeasy = require(\"speakeasy\");\n\nvar randomstring = require(\"randomstring\");\n\nvar utils = require(\"../../../utils\");\n/*\n ***************************************************************************\n * Components that make up AccountTab start here\n ***************************************************************************\n */\n\n\nclass EmailsTableEntry extends Component {\n  constructor(props) {\n    super(props); // An entry can be in three states:\n    // IDLE\n    // CHANGING_EMAIL\n    // DELETING\n\n    this.REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n\n    this.getIPAddr = () => {\n      fetch(\"http://api.ipstack.com/check?access_key=\" + this.state.ipKey, {\n        method: \"GET\"\n      }).then(response => {\n        if (response.ok) {\n          return response.json();\n        }\n      }).then(resData => {\n        this.setState({\n          ipAddr: resData.ip,\n          state: resData.region_name,\n          city: resData.city\n        });\n      });\n    };\n\n    this.setLastActivity = (name, act) => {\n      var date = new Date();\n      date = date.toString();\n      var data = {\n        state: this.state.state,\n        city: this.state.city,\n        IPAddr: this.state.ipAddr,\n        Timestamp: date,\n        username: name\n      };\n      this.props.AffordableClient.addActivity(data).then(response => {\n        if (response.statusText === \"OK\") {\n          console.log(\"activity update success on login\");\n        } else {\n          console.log(\"unable to change activity\");\n        }\n      });\n    };\n\n    this.showAlertOnValidateEmail = () => {\n      if (window.confirm(\"Verify email: \" + document.getElementById(\"new-email\").value + \"?\")) {\n        var email = document.getElementById(\"new-email\").value;\n\n        if (email.length > 0) {\n          var oldEmail = this.state.email;\n          var data = new FormData();\n          data.append(\"email\", email);\n          this.props.client.updatePrimaryEmail(email).then(resData => {\n            window.location.reload(true);\n          });\n        } else {\n          swal(\"Error\", \"No Email Entered. Please try again\", \"error\");\n        }\n      }\n    };\n\n    this.deleteEmail = () => {\n      this.setLastActivity(this.state.username, \"Deleted email\");\n      var data = {\n        email: this.state.email\n      };\n      this.props.AffordableClient.deleteEmail(data).then(response => {\n        if (response.statusText === \"OK\") {\n          window.location.reload(true);\n        } else {\n          swal(\"Error\", \"unable to delete email\", \"error\");\n        }\n      });\n    };\n\n    this.makePrimary = () => {\n      this.setLastActivity(this.state.username, \"Changed primary email\");\n      var data = new FormData();\n      data.append(\"email\", this.state.email);\n      fetch(this.REACT_APP_AF_BACKEND_URL + \"/profile/make-primary\", {\n        method: \"POST\",\n        body: data\n      }).then(response => {\n        if (response.ok) return response.json().then(resData => {\n          alert(resData.success);\n          window.location.reload(true);\n        });else {\n          swal(\"Error\", \"unable to make primary email\", \"error\");\n        }\n      });\n    };\n\n    this.handleEntryStateChange = element => {\n      this.setState({\n        entryState: element.target.value\n      });\n    };\n\n    this.handleBackToIdle = () => {\n      this.setState({\n        entryState: \"IDLE\"\n      });\n    };\n\n    this.showAlertOnValidateSecondaryEmail = () => {\n      if (window.confirm(\"Verify email: \" + this.state.email + \"?\")) {\n        var email = this.state.email;\n        var data = {\n          email: email\n        };\n        this.props.AffordableClient.checkEmail(data).then(response => {\n          if (response.statusText === \"OK\") {\n            var data2 = new FormData();\n\n            var _randomstring = require(\"randomstring\");\n\n            data2.append(\"username\", this.state.username);\n            data2.append(\"newEmail\", email); //additional email\n\n            data2.append(\"oldEmail\", \"\"); //primary email for account\n\n            data2.append(\"randomString\", _randomstring.generate());\n            data2.append(\"timestamp\", Date.now());\n            return fetch(this.REACT_APP_AF_BACKEND_URL + \"/profile/add-secondary-email-verify\", {\n              method: \"POST\",\n              body: data2\n            }).then(response => {\n              if (response.ok) {\n                this.setState({\n                  name2: \"\",\n                  validateEmail: true\n                });\n                swal(\"\", \"Please Check Your Email\", \"warning\");\n              } else {\n                swal(\"Error\", \"Please Try Again\", \"error\");\n              }\n            });\n          }\n        });\n      }\n    };\n\n    this.state = {\n      entryState: \"IDLE\",\n      email: this.props.email,\n      isPrimary: this.props.isPrimary,\n      username: this.props.user,\n      verified: this.props.verified,\n      city: \"\",\n      state: \"\",\n      ipAddr: \"\",\n      ipKey: \"4a51eca5db4bb71dc9fa9cf08dd6294a\"\n    };\n  }\n\n  componentDidMount() {\n    this.getIPAddr();\n  }\n\n  render() {\n    var dropdown = null;\n\n    switch (this.state.entryState) {\n      case \"IDLE\":\n        dropdown = /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 20\n          }\n        });\n        break;\n\n      case \"CHANGING_EMAIL\":\n        dropdown = /*#__PURE__*/React.createElement(\"div\", {\n          className: \"row bottomMarginSmall\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col-2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          className: \"btn btn-info bottomMarginSmall\",\n          onClick: this.handleBackToIdle,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 15\n          }\n        }, \"Close Dropdown\"), /*#__PURE__*/React.createElement(\"input\", {\n          type: \"email\",\n          id: \"new-email\",\n          placeholder: \"Enter a new email\",\n          className: \"form-control bottomMarginSmall\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }\n        }), /*#__PURE__*/React.createElement(\"button\", {\n          value: \"confirmChange\",\n          className: \"btn btn-warning\",\n          onClick: this.showAlertOnValidateEmail,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 15\n          }\n        }, \"Confirm Change Email\")));\n        break;\n\n      case \"DELETING\":\n        dropdown = /*#__PURE__*/React.createElement(\"div\", {\n          className: \" row bottomMarginSmall\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col-2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          className: \"btn btn-info bottomMarginSmall\",\n          onClick: this.handleBackToIdle,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }\n        }, \"Close Dropdown\"), /*#__PURE__*/React.createElement(\"h3\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 15\n          }\n        }, \"Are you sure you would like to delete \", this.state.email, \" from your account?\"), /*#__PURE__*/React.createElement(\"button\", {\n          value: \"confirmDelete\",\n          className: \"btn btn-warning\",\n          onClick: this.deleteEmail,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 15\n          }\n        }, \"Yes, Delete\")));\n        break;\n\n      default:\n        console.log(\"ERROR\");\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row bottomMarginSmall\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }\n    }, this.state.isPrimary ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"customRadioButtonBorder marker markerTrue\",\n      onClick: this.makePrimary,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 15\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"customRadioButtonBorder marker markerFalse\",\n      id: \"secondaryEmail\",\n      onClick: this.makePrimary,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 13\n      }\n    }, this.props.verified ? \"✔\" : \"x\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"headingPaddingRightSmall\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 13\n      }\n    }, this.props.email)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      value: \"CHANGING_EMAIL\",\n      className: \"btn btn-primary\",\n      onClick: this.handleEntryStateChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 13\n      }\n    }, \"Change Email\"), this.state.isPrimary ? null : /*#__PURE__*/React.createElement(\"button\", {\n      value: \"DELETING\",\n      className: \"btn btn-danger\",\n      onClick: this.handleEntryStateChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 15\n      }\n    }, \"Delete\"), !this.props.verified ? /*#__PURE__*/React.createElement(\"button\", {\n      value: \"VERIFYING\",\n      className: \"btn btn-info\",\n      onClick: this.showAlertOnValidateSecondaryEmail,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 15\n      }\n    }, \"Resend Verification Email\") : \"\")), dropdown);\n  }\n\n}\n\nclass EmailsTablePanel extends Component {\n  constructor(props) {\n    super(props);\n    this.REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n    this.state = {\n      emails: [],\n      username: this.props.user\n    }; // handlers will go here\n  }\n\n  componentDidMount() {\n    this.props.client.getEmails(this.props.user).then(resData => {\n      console.log(resData.emails);\n      this.setState({\n        emails: resData.emails\n      });\n      console.log(\"Emails returned\" + this.state.emails);\n      console.log(this.state.emails.length);\n    }); // TODO: maybe alert of failure to fetch emails later\n  }\n\n  render() {\n    var username = this.state.username;\n    var client = this.props.client;\n    var entries = this.state.emails.map(function (element, idx) {\n      return /*#__PURE__*/React.createElement(EmailsTableEntry, {\n        key: idx,\n        user: username,\n        email: element.email,\n        isPrimary: element.isPrimary,\n        verified: element.verified,\n        client: client,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 9\n        }\n      });\n    });\n    return /*#__PURE__*/React.createElement(CollapseWithHeader, {\n      title: \"Email Management\",\n      open: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdownWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 13\n      }\n    }, \"Primary\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 13\n      }\n    }, \"Verified\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 13\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 13\n      }\n    }, \"Options\")), entries));\n  }\n\n}\n\nclass ResetPasswordPanel extends Component {\n  constructor(props) {\n    super(props);\n    this.REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n    this.state = {\n      changingPassword: false,\n      passwordsMatching: false,\n      username: this.props.user,\n      email: this.props.email,\n      passwordFeedback: [],\n      ipKey: \"4a51eca5db4bb71dc9fa9cf08dd6294a\",\n      city: \"\",\n      state: \"\",\n      ipAddr: \"\",\n      QRState: false\n    };\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\n    this.showAlertPasswordChange = this.showAlertPasswordChange.bind(this);\n    this.checkPasswordsMatching = this.checkPasswordsMatching.bind(this);\n    this.getIPAddr = this.getIPAddr.bind(this);\n    this.setLastActivity = this.setLastActivity.bind(this); // this.requireTwoFactorChangePassword = this.requireTwoFactorChangePassword.bind(\n    //   this\n    // );\n    // this.handleValidateTwoFactor = this.handleValidateTwoFactor.bind(this);\n  }\n\n  setLastActivity(name) {\n    var data = new FormData();\n    var date = new Date();\n    date = date.toString();\n    data.append(\"state\", this.state.state);\n    data.append(\"city\", this.state.city);\n    data.append(\"IPAddr\", this.state.IPAddr);\n    data.append(\"Timestamp\", date);\n    data.append(\"Last_Act\", \"Password reset\");\n    data.append(\"username\", name);\n    fetch(this.REACT_APP_AF_BACKEND_URL + \"/activity/add-activity\", {\n      method: \"POST\",\n      body: data\n    }).then(response => {\n      if (response.ok) return response.json().then(() => {\n        console.log(\"activity update success on login\");\n      });else {\n        console.log(\"unable to change activity\");\n      }\n    });\n  }\n\n  getIPAddr() {\n    fetch(\"http://api.ipstack.com/check?access_key=\" + this.state.ipKey, {\n      method: \"GET\"\n    }).then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n    }).then(resData => {\n      this.setState({\n        ipAddr: resData.ip,\n        state: resData.region_name,\n        city: resData.city\n      });\n    });\n  }\n\n  handlePasswordChange() {\n    this.setState({\n      changingPassword: !this.state.changingPassword\n    });\n  }\n\n  componentDidMount() {\n    this.getIPAddr(); // this.requireTwoFactorChangePassword();\n  }\n\n  showAlertPasswordChange() {\n    this.setLastActivity(this.state.username);\n\n    if (this.state.passwordsMatching) {\n      var currentPw = document.getElementById(\"current-pw\").value.toString();\n      var newPw = document.getElementById(\"new-pw-1\").value.toString();\n      this.props.client.changePassword(currentPw, newPw).then(() => {\n        swal(\"Password Updated\", \"Your password has now changed\", \"success\");\n      }).catch(error => {\n        console.log(error);\n        swal(\"There was an error changing your password\", error.message, \"error\");\n      });\n      this.handlePasswordChange();\n    }\n  } // requireTwoFactorChangePassword() {\n  //   const data = new FormData();\n  //   data.append(\"username\", this.state.username);\n  //   fetch(\"http://localhost:4000/profile/get-devices\", {\n  //     method: \"POST\",\n  //     body: data\n  //   }).then(response => {\n  //     if (response.ok)\n  //       return response.json().then(resData => {\n  //         if (resData.devices) {\n  //           this.setState({\n  //             QRState: true\n  //           });\n  //         }\n  //       });\n  //   });\n  // }\n  // handleValidateTwoFactor(event) {\n  //   console.log(\"validating two-factor for change password\");\n  //   event.preventDefault();\n  //   const data = new FormData();\n  //   const name = this.state.username;\n  //   const token = document.getElementById(\"token\").value;\n  //   const GoogleAuthOpt = this.state.QRState;\n  //   data.append(\"token\", token);\n  //   data.append(\"username\", name);\n  //   data.append(\"GoogleAuth\", GoogleAuthOpt);\n  //   fetch(\"http://localhost:4000/authentication/two-factor/username\", {\n  //     method: \"POST\",\n  //     body: data\n  //   })\n  //     .then(response => response.json())\n  //     .then(response => {\n  //       response.verified ? this.showAlertSucc2() : this.showAlertFail();\n  //     });\n  // }\n  // showAlertSucc2() {\n  //   swal(\"Success!\", \"Two factor code validated\", \"success\");\n  //   this.showAlertPasswordChange();\n  // }\n  // upon failure\n\n\n  showAlertFail() {\n    swal(\"Error\", \"Please Try Again\", \"error\");\n  }\n\n  checkPasswordsMatching() {\n    // TODO: can be improved but works for now\n    var pw1 = document.getElementById(\"new-pw-1\").value;\n    var pw2 = document.getElementById(\"new-pw-2\").value;\n\n    if (pw1 === pw2 && utils.passwordMeetsCriteria(pw1)) {\n      this.setState({\n        passwordsMatching: true,\n        passwordFeedback: [] // No feedback to give if the password criteria is met\n\n      });\n    } else {\n      var feedback = utils.getPasswordFeedback(pw1);\n\n      if (pw1 !== pw2) {\n        feedback.unshift(\"Passwords are not matching\");\n      }\n\n      this.setState({\n        passwordsMatching: false,\n        passwordFeedback: feedback\n      });\n    }\n  }\n\n  render() {\n    var QRAuthenticationForm = () => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row mt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col\",\n        align: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        id: \"token\",\n        placeholder: \"Enter 6-digit token from Google Authenticator App\",\n        className: \"form-control bottomMarginSmall\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        // onClick={this.handleValidateTwoFactor}\n        id: \"authenticate\",\n        className: \"App-login-button2 bottomMarginSmall\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 13\n        }\n      }, \"Authenticate and Change Password\")));\n    };\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 7\n      }\n    }, this.state.changingPassword ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex bottomMarginSmall\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"headingPaddingRightSmall\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 594,\n        columnNumber: 15\n      }\n    }, \"Password Management\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-warning\",\n      onClick: this.handlePasswordChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 595,\n        columnNumber: 15\n      }\n    }, \"Discard Changes\")), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      id: \"current-pw\",\n      placeholder: \"Enter Current Password\",\n      className: \"form-control bottomMarginSmall\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      id: \"new-pw-1\",\n      placeholder: \"Enter New Password\",\n      className: \"form-control bottomMarginSmall\",\n      onChange: this.checkPasswordsMatching,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      id: \"new-pw-2\",\n      placeholder: \"Enter New Password Again\",\n      className: \"form-control bottomMarginSmall\",\n      onChange: this.checkPasswordsMatching,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 616,\n        columnNumber: 13\n      }\n    }), this.state.passwordsMatching ? /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"bottomMarginSmall\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 15\n      }\n    }, \"Passwords are matching\") : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 627,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 628,\n        columnNumber: 17\n      }\n    }, this.state.passwordFeedback.map(function (entry, idx) {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        key: idx,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 28\n        }\n      }, entry);\n    }))), this.state.QRState ? /*#__PURE__*/React.createElement(QRAuthenticationForm, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 637,\n        columnNumber: 15\n      }\n    }) : /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary btnText bottomMarginSmall\",\n      id: \"resetPasswordBtn\",\n      onClick: this.showAlertPasswordChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 639,\n        columnNumber: 15\n      }\n    }, \"Reset Password\")) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 649,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"headingPaddingRightSmall\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 650,\n        columnNumber: 13\n      }\n    }, \"Password Management\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-info\",\n      id: \"changePasswordBtn\",\n      onClick: this.handlePasswordChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 651,\n        columnNumber: 13\n      }\n    }, \"Change\")));\n  }\n\n}\n\nclass PrimaryEmailChangePanel extends Component {\n  constructor(props) {\n    super(props);\n    this.REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n    this.state = {\n      changingEmail: false,\n      email: this.props.email,\n      username: this.props.user,\n      setup: false\n    };\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.handleEmailChangeSubmission = this.handleEmailChangeSubmission.bind(this);\n    this.showAlertOnValidateEmail = this.showAlertOnValidateEmail.bind(this); // TODO: maybe handle some way of getting feedback for if the email submission went through\n  }\n\n  showAlertOnValidateEmail() {\n    if (window.confirm(\"Verify email: \" + document.getElementById(\"change-primary-email\").value + \"?\")) {\n      var email = document.getElementById(\"change-primary-email\").value;\n      var oldEmail = this.state.email; //gets old email from call to get-primary-email\n\n      var data = new FormData();\n      data.append(\"email\", email);\n      fetch(this.REACT_APP_AF_BACKEND_URL + \"/authentication/email\", {\n        method: \"POST\",\n        body: data\n      }).then(response => {\n        if (response.ok) return response.json();\n      }).then(resData => {\n        if (resData.emailIsUnique) {\n          var data2 = new FormData();\n\n          var _randomstring2 = require(\"randomstring\");\n\n          data2.append(\"username\", this.state.username);\n          data2.append(\"newEmail\", email);\n          data2.append(\"oldEmail\", oldEmail);\n          data2.append(\"randomString\", _randomstring2.generate());\n          data2.append(\"timestamp\", Date.now());\n          return fetch(this.REACT_APP_AF_BACKEND_URL + \"/profile/primary-email-change-verify\", {\n            method: \"POST\",\n            body: data2\n          }).then(response => {\n            if (response.ok) {\n              this.setState({\n                name2: \"\",\n                validateEmail: true\n              });\n              swal(\"Error\", \"Please Check Your Email\", \"error\");\n            }\n          });\n        } else {\n          window.confirm(\"Email: \" + document.getElementById(\"change-primary-email\").value + \" is already in the database\");\n          document.getElementById(\"change-primary-email\").value = \"\";\n        }\n      });\n    } else {\n      swal(\"Error\", \"Please Try Again\", \"error\");\n    }\n  }\n\n  handleEmailChange() {\n    this.setState({\n      changingEmail: !this.state.changingEmail\n    });\n  }\n\n  handleEmailChangeSubmission(event) {\n    console.log(event);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"emailChangeWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 754,\n        columnNumber: 7\n      }\n    }, this.state.changingEmail ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 756,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex bottomMarginSmall\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 757,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"headingPaddingRightSmall\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 758,\n        columnNumber: 15\n      }\n    }, \"Email(primary): \", this.state.email), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-warning\",\n      onClick: this.handleEmailChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 761,\n        columnNumber: 15\n      }\n    }, \"Discard Changes\")), /*#__PURE__*/React.createElement(\"input\", {\n      placeholder: \"Enter New Email\",\n      className: \"form-control bottomMarginSmall\",\n      id: \"change-primary-email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 769,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary btnText\",\n      onClick: this.showAlertOnValidateEmail,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 774,\n        columnNumber: 13\n      }\n    }, \"Validate\")) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 782,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"headingPaddingRightSmall\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 783,\n        columnNumber: 13\n      }\n    }, \"Email(primary): \", this.state.email), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-info\",\n      onClick: this.handleEmailChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 786,\n        columnNumber: 13\n      }\n    }, \"Change\")));\n  }\n\n}\n\nclass SecondaryEmailChangePanel extends Component {\n  constructor(props) {\n    super(props);\n    this.REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n    this.state = {\n      changingEmail: false,\n      email: this.props.email,\n      username: this.props.user\n    };\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.handleEmailChangeSubmission = this.handleEmailChangeSubmission.bind(this);\n    this.showAlertOnValidateSecondaryEmail = this.showAlertOnValidateSecondaryEmail.bind(this); // TODO: maybe handle some way of getting feedback for if the email submission went through\n  }\n\n  showAlertOnValidateSecondaryEmail() {\n    if (window.confirm(\"Verify email: \" + document.getElementById(\"change-secondary-email\").value + \"?\")) {\n      var email = document.getElementById(\"change-secondary-email\").value;\n      var data = new FormData();\n      data.append(\"email\", email);\n      fetch(this.REACT_APP_AF_BACKEND_URL + \"/authentication/email\", {\n        method: \"POST\",\n        body: data\n      }).then(response => {\n        if (response.ok) return response.json();\n      }).then(resData => {\n        if (resData.emailIsUnique) {\n          var data2 = new FormData();\n\n          var _randomstring3 = require(\"randomstring\");\n\n          data2.append(\"username\", this.state.username);\n          data2.append(\"newEmail\", email); //additional email\n\n          data2.append(\"oldEmail\", this.state.email); //primary email for account\n\n          data2.append(\"randomString\", _randomstring3.generate());\n          data2.append(\"timestamp\", Date.now());\n          return fetch(this.REACT_APP_AF_BACKEND_URL + \"/profile/add-secondary-email-verify\", {\n            method: \"POST\",\n            body: data2\n          }).then(response => {\n            if (response.ok) {\n              var data3 = new FormData();\n              data3.append(\"username\", this.state.username);\n              data3.append(\"email\", email);\n              return fetch(this.REACT_APP_AF_BACKEND_URL + \"/profile/add-unverified-email\", {\n                method: \"POST\",\n                body: data3\n              }).then(response => {\n                if (response.ok) {\n                  this.setState({\n                    name2: \"\",\n                    validateEmail: true\n                  });\n                  swal(\"\", \"Please Check Your Email\", \"warning\");\n                }\n              });\n            }\n          });\n        } else {\n          window.confirm(\"Email: \" + document.getElementById(\"change-secondary-email\").value + \" is already in the database\");\n          document.getElementById(\"change-secondary-email\").value = \"\";\n        }\n      });\n    } else {\n      swal(\"Error\", \"Please Try Again\", \"error\");\n    }\n  }\n\n  handleEmailChange() {\n    this.setState({\n      changingEmail: !this.state.changingEmail\n    });\n  }\n\n  handleEmailChangeSubmission(event) {\n    console.log(event);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"emailChangeWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 895,\n        columnNumber: 7\n      }\n    }, this.state.changingEmail ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 897,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex bottomMarginSmall\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 898,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"headingPaddingRightSmall\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 899,\n        columnNumber: 15\n      }\n    }, \"Add an Email\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"addEmail\",\n      onClick: this.handleEmailChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 900,\n        columnNumber: 15\n      }\n    }, \"Discard Changes\")), /*#__PURE__*/React.createElement(\"input\", {\n      placeholder: \"Enter New Email\",\n      className: \"form-control bottomMarginSmall\",\n      id: \"change-secondary-email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 905,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary btnText\",\n      onClick: this.showAlertOnValidateSecondaryEmail,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 910,\n        columnNumber: 13\n      }\n    }, \"Validate\")) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 918,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"headingPaddingRightSmall\",\n      id: \"addEmailButton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 919,\n        columnNumber: 13\n      }\n    }, \"Add an Email\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-info\",\n      id: \"addEmailBtn\",\n      onClick: this.handleEmailChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 922,\n        columnNumber: 13\n      }\n    }, \"Change\")));\n  }\n\n}\n\nclass AccountActivityPanel extends Component {\n  constructor(props) {\n    super(props);\n    this.REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n    this.state = {\n      time1: \"N/A\",\n      time2: \"N/A\",\n      time3: \"N/A\",\n      change1: \"N/A\",\n      change2: \"N/A\",\n      change3: \"N/A\",\n      username: this.props.user,\n      email: this.props.email,\n      times: [],\n      acts: []\n    };\n    this.handleActivityChange = this.handleActivityChange.bind(this);\n  }\n\n  handleActivityChange() {\n    var data = new FormData();\n    data.append(\"username\", this.state.username);\n    fetch(this.REACT_APP_AF_BACKEND_URL + \"/activity/get-activity\", {\n      method: \"POST\",\n      body: data\n    }).then(response => {\n      if (response.ok) return response.json().then(resData => {\n        var size = resData.activities.length - 1;\n        this.setState({\n          acts: resData.activities\n        });\n\n        if (this.state.acts[size]) {\n          this.setState({\n            change1: this.state.acts[size].Last_Act\n          });\n        }\n\n        if (this.state.acts[size - 1]) {\n          this.setState({\n            change2: this.state.acts[size - 1].Last_Act\n          });\n        }\n\n        if (this.state.acts[size - 2]) {\n          this.setState({\n            change3: this.state.acts[size - 2].Last_Act\n          });\n        }\n      });else {\n        swal(\"Error\", \"unable to see last activity\", \"error\");\n      }\n    });\n    var data2 = new FormData();\n    data2.append(\"username\", this.state.username);\n    fetch(this.REACT_APP_AF_BACKEND_URL + \"/activity/get-timestamp\", {\n      method: \"POST\",\n      body: data\n    }).then(response => {\n      if (response.ok) return response.json().then(resData => {\n        var size = resData.Timelog.length - 1;\n        this.setState({\n          times: resData.Timelog\n        });\n\n        if (this.state.times[size]) {\n          this.setState({\n            time1: this.state.times[size].Timestamp\n          });\n        }\n\n        if (this.state.times[size - 1]) {\n          this.setState({\n            time2: this.state.times[size - 1].Timestamp\n          });\n        }\n\n        if (this.state.times[size - 2]) {\n          this.setState({\n            time3: this.state.times[size - 2].Timestamp\n          });\n        }\n      });else {\n        swal(\"Error\", \"unable to see last activity time\", \"error\");\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(CollapseWithHeader, {\n      title: \"Account Activity\",\n      open: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1012,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdownWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1013,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary activityButton\",\n      onClick: this.handleActivityChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1014,\n        columnNumber: 11\n      }\n    }, \"Update Account Activity\"), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1020,\n        columnNumber: 11\n      }\n    }, \"Latest Login Times\"), /*#__PURE__*/React.createElement(\"ol\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1021,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1022,\n        columnNumber: 13\n      }\n    }, this.state.time1), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1023,\n        columnNumber: 13\n      }\n    }, this.state.time2), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1024,\n        columnNumber: 13\n      }\n    }, this.state.time3)), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1027,\n        columnNumber: 11\n      }\n    }, \"Latest Profile Changes\"), /*#__PURE__*/React.createElement(\"ol\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1028,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1029,\n        columnNumber: 13\n      }\n    }, this.state.change1), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1030,\n        columnNumber: 13\n      }\n    }, this.state.change2), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1031,\n        columnNumber: 13\n      }\n    }, this.state.change3))));\n  }\n\n}\n\nclass AccountTab extends Component {\n  constructor(...args) {\n    super(...args);\n    this.REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n  }\n\n  // TODO: Finish Account Panel\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1044,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ResetPasswordPanel, {\n      user: this.props.user,\n      email: this.props.email,\n      client: this.props.client,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1045,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(EmailsTablePanel, {\n      user: this.props.user,\n      client: this.props.client,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1054,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n/*\n ***************************************************************************\n * Components that make up SecurityTab start here\n ***************************************************************************\n */\n\n\nclass SecurityRecommendationsPanel extends Component {\n  constructor(...args) {\n    super(...args);\n    this.REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(CollapseWithHeader, {\n      title: \"Security recommendations\",\n      open: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1078,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdownWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1079,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"securityRecommendationsList\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1080,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1081,\n        columnNumber: 13\n      }\n    }, \"Two-factor authentication for login\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1082,\n        columnNumber: 13\n      }\n    }, \"Add a back-up email address\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1083,\n        columnNumber: 13\n      }\n    }, \"Use caution when accessing your account through public Wi-Fi\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1086,\n        columnNumber: 13\n      }\n    }, \"Enable timed log-off, especially when using public computers\"))));\n  }\n\n}\n\nclass TwoFactorAuthenticationPanel extends Component {\n  constructor(props) {\n    super(props); // TODO: Get initial state from server, and re-render if state changes\n\n    this.REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n    this.state = {\n      login: true,\n      passwordUpdates: false,\n      securitySettingChanges: true,\n      bankAccountWithdraw: false,\n      secret: speakeasy.generateSecret({\n        length: 20\n      }),\n      username: this.props.user,\n      email: this.props.email,\n      deviceList: [],\n      isAddingDevice: false\n    };\n    this.handleTwoFactorCodeValidation = this.handleTwoFactorCodeValidation.bind(this);\n    this.handleStoreTwoFactorDatabase = this.handleStoreTwoFactorDatabase.bind(this);\n    this.handleRemoveTwoFactorDevice = this.handleRemoveTwoFactorDevice.bind(this);\n    this.handleAddDeviceClick = this.handleAddDeviceClick.bind(this);\n  } //when the page loads, a request is sent to the server to retrieve all two-factor devices for the user, and the results are populated into this.state.devices\n\n\n  componentDidMount() {\n    var data = new FormData();\n    data.append(\"username\", this.props.user);\n    fetch(this.REACT_APP_AF_BACKEND_URL + \"/profile/get-devices\", {\n      method: \"POST\",\n      body: data\n    }).then(response => {\n      if (response.ok) return response.json().then(resData => {\n        this.setState({\n          deviceList: resData.devices\n        });\n      });\n    });\n  }\n\n  handleAddDeviceClick() {\n    this.setState({\n      isAddingDevice: true\n    });\n  } //call then when user clicks Authenticate after inputting 6 digit token from google authenticator app\n\n\n  handleTwoFactorCodeValidation(ev) {\n    ev.preventDefault();\n    var data = new FormData();\n    var token = document.getElementById(\"token\").value;\n    data.append(\"token\", token); // var x = this.state.tempvar; //Math.floor((Math.random() * 1000) + 1);\n\n    data.append(\"imageid\", this.state.imageURL);\n    data.append(\"secret\", this.state.secret.base32);\n    fetch(this.REACT_APP_AF_BACKEND_URL + \"/authentication/two-factor\", {\n      method: \"POST\",\n      body: data\n    }).then(response => response.json()).then(response => {\n      if (response.verified) {\n        this.showAlertSucc();\n        this.handleStoreTwoFactorDatabase();\n      } else {\n        this.showAlertFail();\n      }\n    });\n  }\n\n  showAlertSucc() {\n    swal(\"Success!\", \"your device now has 2 factor authentication! \\n We also recommend securing your device with a password to prevent fraud\", \"success\");\n    this.forceUpdate();\n  }\n\n  showAlertFail() {\n    swal(\"Error\", \"Please Try Again\", \"error\");\n  }\n\n  handleStoreTwoFactorDatabase() {\n    var data = new FormData();\n    data.append(\"DeviceName\", document.getElementById(\"device-name\").value);\n    data.append(\"Username\", this.state.username);\n    data.append(\"Email\", this.state.email);\n    data.append(\"RandomString\", randomstring.generate());\n    data.append(\"Timestamp\", Date.now());\n    data.append(\"Secret\", this.state.secret.base32);\n    console.log(data);\n    fetch(this.REACT_APP_AF_BACKEND_URL + \"/profile/add-two-factor\", {\n      method: \"POST\",\n      body: data\n    }).then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n    }).then(() => {});\n  }\n\n  handleRemoveTwoFactorDevice() {\n    var data = new FormData();\n    data.append(\"DeviceName\", document.getElementById(\"remove-device-name\").value);\n    data.append(\"Username\", this.state.username);\n    data.append(\"Email\", this.state.email);\n    console.log(data);\n    fetch(this.REACT_APP_AF_BACKEND_URL + \"/profile/remove-two-factor\", {\n      method: \"POST\",\n      body: data\n    }).then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n    }).then(resData => {\n      if (resData.changed) {\n        swal(\"Your Two Factor Device has been Removed!\", \"success\");\n      } else {\n        swal(\"Error!\", \"No device found with this name\", \"error\");\n      }\n    });\n  }\n\n  render() {\n    var devices = /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1239,\n        columnNumber: 19\n      }\n    }, \"None at the moment\");\n\n    if (this.state.deviceList !== undefined && this.state.deviceList.length > 0) {\n      devices = this.state.deviceList.map(function (element, idx) {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: idx,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1246,\n            columnNumber: 16\n          }\n        }, element.deviceName);\n      });\n    } // TODO: this is how you use qrcode dependency\n\n\n    var qrcodeUrl = \"\";\n    QRCode.toDataURL(this.state.secret.otpauth_url, function (err, url) {\n      qrcodeUrl = url;\n    });\n    return /*#__PURE__*/React.createElement(CollapseWithHeader, {\n      title: \"Two-Factor Authentication\",\n      open: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1258,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdownWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1259,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1260,\n        columnNumber: 11\n      }\n    }, \"Protected Actions\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1261,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"markerContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1263,\n        columnNumber: 11\n      }\n    }, this.state.login ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"marker markerTrue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1265,\n        columnNumber: 15\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"marker markerFalse\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1267,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1269,\n        columnNumber: 13\n      }\n    }, \"Login\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"markerContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1272,\n        columnNumber: 11\n      }\n    }, this.state.passwordUpdates ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"marker markerTrue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1274,\n        columnNumber: 15\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"marker markerFalse\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1276,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1278,\n        columnNumber: 13\n      }\n    }, \"Password updates\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"markerContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1281,\n        columnNumber: 11\n      }\n    }, this.state.securitySettingChanges ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"marker markerTrue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1283,\n        columnNumber: 15\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"marker markerFalse\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1285,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1287,\n        columnNumber: 13\n      }\n    }, \"Security setting changes\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"markerContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1290,\n        columnNumber: 11\n      }\n    }, this.state.bankAccountWithdraw ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"marker markerTrue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1292,\n        columnNumber: 15\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"marker markerFalse\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1294,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1296,\n        columnNumber: 13\n      }\n    }, \"Bank Account Withdraw\")), /*#__PURE__*/React.createElement(\"img\", {\n      alt: \"google authentication\",\n      className: \"twoFactorImg\",\n      src: \"https://lh3.googleusercontent.com/HPc5gptPzRw3wFhJE1ZCnTqlvEvuVFBAsV9etfouOhdRbkp-zNtYTzKUmUVPERSZ_lAL=s180-rw\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1300,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1306,\n        columnNumber: 11\n      }\n    }, \"Use Google's Android or iPhone app for adding two token based two factor authentication.\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1311,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleAddDeviceClick,\n      className: \"btn btn-warning twoFactorButton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1314,\n        columnNumber: 13\n      }\n    }, \"Add Device\"), this.state.isAddingDevice ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1321,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      alt: \"QR Code\",\n      src: qrcodeUrl,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1322,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control bottomMarginSmall\",\n      type: \"text\",\n      id: \"device-name\",\n      placeholder: \"Enter the name of your device\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1323,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control bottomMarginSmall\",\n      type: \"text\",\n      id: \"token\",\n      placeholder: \"Enter 6-digit code from Google Authenticator App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1329,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleTwoFactorCodeValidation,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1336,\n        columnNumber: 17\n      }\n    }, \"Validate\")) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bottomMarginSmall\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1341,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleRemoveTwoFactorDevice,\n      className: \"btn btn-warning twoFactorButton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1345,\n        columnNumber: 11\n      }\n    }, \"Remove Device\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"removeDeviceInput\",\n      id: \"remove-device-name\",\n      placeholder: \"Enter Device To Remove\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1352,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1359,\n        columnNumber: 11\n      }\n    }, \"Registered Devices:\"), devices, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1363,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nclass SecurityTab extends Component {\n  constructor(...args) {\n    super(...args);\n    this.REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n  }\n\n  // TODO: Finish Security Panel\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1376,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(SecurityRecommendationsPanel, {\n      user: this.props.user,\n      email: this.props.email,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1377,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(TwoFactorAuthenticationPanel, {\n      user: this.props.user,\n      email: this.props.email,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1381,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n/*\n ***************************************************************************\n * The main Settings component starts here\n ***************************************************************************\n */\n\n\nclass Settings extends Component {\n  constructor(props) {\n    super(props);\n    this.client = '';\n    this.REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n    console.log(JSON.stringify(props));\n    this.client = props.client;\n    var name = \"\".concat(props.user, \" @ Affordable Admin\");\n    this.state = {\n      currentSection: \"Account\",\n      twoFactor: this.props.twoFactor,\n      username: this.props.user,\n      email: this.props.email,\n      imageURL: '',\n      secret: speakeasy.generateSecret({\n        length: 20,\n        issuer: 'Affordable Admin',\n        name: name\n      })\n    }; // Whenever the a section is clicked, switch to it\n\n    this.changeSection = this.changeSection.bind(this);\n    this.handleTwoFactorAdd = this.handleTwoFactorAdd.bind(this);\n    this.handleTwoFactorRemove = this.handleTwoFactorRemove.bind(this);\n  }\n\n  componentDidMount() {\n    this.createTwoFactorURL();\n  }\n\n  changeSection(e) {\n    var selectedSection = e.target.innerHTML; // If a different section is chosen, we want to go to it\n\n    if (selectedSection !== this.state.currentSection) {\n      this.setState({\n        currentSection: selectedSection\n      });\n    }\n  }\n\n  showAlertFail() {\n    alert(\"Please Try Again\");\n  }\n\n  handleTwoFactorAdd(ev) {\n    ev.preventDefault();\n    var token = document.getElementById(\"token\").value;\n    var device = document.getElementById(\"add-device-input\").value;\n    var timeStamp = Date.now().toString();\n    var randomString = randomstring.generate();\n    var secret = this.state.secret.base32;\n    var data = new FormData();\n    data.append(\"token\", token); // var x = this.state.tempvar; //Math.floor((Math.random() * 1000) + 1);\n\n    data.append(\"imageid\", this.state.imageURL);\n    data.append(\"secret\", this.state.secret.base32);\n    console.log(\"secret:\", this.state.secret); // var x = this.state.tempvar; //Math.floor((Math.random() * 1000) + 1);\n\n    console.log(\"secret:\", this.state.secret);\n    console.log(this.state.imageURL);\n    this.client.twoFactor(token, this.state.imageURL, this.state.secret.base32).then(response => {\n      console.log(response);\n\n      if (response.verified) {\n        this.client.addTwoFactor(device, this.state.username, this.state.email, randomString, timeStamp, secret).then(resp => {\n          swal(\"You have registered your device for Two Factor Authentication!\");\n          this.setState({\n            twoFactor: true\n          });\n        }, resp => {\n          console.log(resp);\n          swal(\"Error setting up device for Two Factor Authentication, please try again later.\");\n        });\n      } else {\n        this.showAlertFail();\n      }\n    });\n  }\n\n  handleTwoFactorRemove() {\n    // const data = new FormData();\n    var token = document.getElementById(\"token\").value;\n    this.props.client.checkTwoFactorByAgainstUsername(this.state.username, token, \"true\").then(res => {\n      if (res.verified == true) {\n        this.client.removeTwoFactor(this.state.username, this.state.email).then(resp => {\n          swal(\"You have removed Two Factor Authentication from your account.\");\n          this.setState({\n            twoFactor: false\n          });\n        }, resp => {\n          console.log(resp);\n          swal(\"Error setting up device for Two Factor Authentication, please try again later.\");\n        });\n      } else {\n        this.showAlertFail();\n      }\n    });\n  }\n\n  createTwoFactorURL() {\n    QRCode.toDataURL(this.state.secret.otpauth_url, (err, imageData) => {\n      this.setState({\n        imageURL: imageData\n      });\n    });\n  }\n\n  render() {\n    var accountSection = /*#__PURE__*/React.createElement(\"li\", {\n      onClick: this.changeSection,\n      className: \"notSelectedStyle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1513,\n        columnNumber: 7\n      }\n    }, \"Account\");\n    var bankingInfoSection = /*#__PURE__*/React.createElement(\"li\", {\n      onClick: this.changeSection,\n      id: \"bankingInfoTab\",\n      className: \"notSelectedStyle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1518,\n        columnNumber: 7\n      }\n    }, \"Banking Information\");\n    var MFAInfoSection = /*#__PURE__*/React.createElement(\"li\", {\n      onClick: this.changeSection,\n      id: \"modifyMFATab\",\n      className: \"notSelectedStyle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1523,\n        columnNumber: 7\n      }\n    }, \"Modify MFA\"); // let securitySection = (\n    //   <li\n    //     onClick={this.changeSection}\n    //     id=\"securityTab\"\n    //     className=\"notSelectedStyle\"\n    //   >\n    //     Security\n    //   </li>\n    // );\n\n    var sectionContent = null;\n\n    if (this.state.currentSection === \"Account\") {\n      accountSection = /*#__PURE__*/React.createElement(\"li\", {\n        onClick: this.changeSection,\n        className: \"selectedStyle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1540,\n          columnNumber: 9\n        }\n      }, \"Account\");\n      sectionContent = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tabPadding\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1545,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(AccountTab, {\n        user: this.state.username,\n        email: this.state.email,\n        client: this.props.client,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1546,\n          columnNumber: 11\n        }\n      }));\n    } else if (this.state.currentSection === \"Banking Information\") {\n      /* INSERTED */\n      bankingInfoSection = /*#__PURE__*/React.createElement(\"li\", {\n        onClick: this.changeSection,\n        className: \"selectedStyle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1555,\n          columnNumber: 11\n        }\n      }, \"Banking Information\");\n      sectionContent = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tabPadding\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1560,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(BankingInfoTab, {\n        user: this.state.username,\n        usertype: this.state.usertype,\n        email: this.state.email,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1561,\n          columnNumber: 13\n        }\n      }));\n    } else if (this.state.currentSection === \"Modify MFA\") {\n      MFAInfoSection = /*#__PURE__*/React.createElement(\"li\", {\n        onClick: this.changeSection,\n        className: \"selectedStyle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1568,\n          columnNumber: 11\n        }\n      }, \"Modify MFA\");\n\n      if (this.state.twoFactor) {\n        sectionContent = /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1574,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"h3\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1575,\n            columnNumber: 15\n          }\n        }, \"Enter Code to Remove two Factor Authentication\"), /*#__PURE__*/React.createElement(ValidateTwoFactorComponent, {\n          handleValidateTwoFactor: this.handleTwoFactorRemove,\n          buttonText: 'Remove Two Factor',\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1576,\n            columnNumber: 15\n          }\n        }));\n      } else {\n        console.log(this.state.imageURL);\n        sectionContent = /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1582,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"h3\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1583,\n            columnNumber: 15\n          }\n        }, \"Add Two Factor Authentication Here\"), /*#__PURE__*/React.createElement(AddTwoFactorComponent, {\n          handleTwoFactorCodeValidation: this.handleTwoFactorAdd,\n          imageURL: this.state.imageURL,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1584,\n            columnNumber: 15\n          }\n        }));\n      }\n    } // } else if (this.state.currentSection === \"Security\") {\n    //   securitySection = (\n    //     <li onClick={this.changeSection} className=\"selectedStyle\">\n    //       Security\n    //     </li>\n    //   );\n    // sectionContent = (\n    //   <div className=\"tabPadding\">\n    //     <SecurityTab user={this.state.username} email={this.state.email} />\n    //   </div>\n    // );\n    // }\n\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1606,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1607,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1609,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"headingStyle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1610,\n        columnNumber: 13\n      }\n    }, this.state.currentSection), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"sectionBarStyle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1611,\n        columnNumber: 13\n      }\n    }, accountSection, bankingInfoSection, MFAInfoSection))), sectionContent);\n  }\n\n}\n\nexport default Settings;","map":{"version":3,"sources":["/home/ubuntu/Connor/WorkOSU/app/src/pages/MainPages/Settings/index.js"],"names":["React","Component","CollapseWithHeader","QRCode","swal","AffordableClient","AffordableHttpError","BankingInfoTab","AddTwoFactorComponent","ValidateTwoFactorComponent","speakeasy","require","randomstring","utils","EmailsTableEntry","constructor","props","REACT_APP_AF_BACKEND_URL","process","env","window","getIPAddr","fetch","state","ipKey","method","then","response","ok","json","resData","setState","ipAddr","ip","region_name","city","setLastActivity","name","act","date","Date","toString","data","IPAddr","Timestamp","username","addActivity","statusText","console","log","showAlertOnValidateEmail","confirm","document","getElementById","value","email","length","oldEmail","FormData","append","client","updatePrimaryEmail","location","reload","deleteEmail","makePrimary","body","alert","success","handleEntryStateChange","element","entryState","target","handleBackToIdle","showAlertOnValidateSecondaryEmail","checkEmail","data2","generate","now","name2","validateEmail","isPrimary","user","verified","componentDidMount","render","dropdown","EmailsTablePanel","emails","getEmails","entries","map","idx","ResetPasswordPanel","changingPassword","passwordsMatching","passwordFeedback","QRState","handlePasswordChange","bind","showAlertPasswordChange","checkPasswordsMatching","currentPw","newPw","changePassword","catch","error","message","showAlertFail","pw1","pw2","passwordMeetsCriteria","feedback","getPasswordFeedback","unshift","QRAuthenticationForm","entry","PrimaryEmailChangePanel","changingEmail","setup","handleEmailChange","handleEmailChangeSubmission","emailIsUnique","event","SecondaryEmailChangePanel","data3","AccountActivityPanel","time1","time2","time3","change1","change2","change3","times","acts","handleActivityChange","size","activities","Last_Act","Timelog","AccountTab","SecurityRecommendationsPanel","TwoFactorAuthenticationPanel","login","passwordUpdates","securitySettingChanges","bankAccountWithdraw","secret","generateSecret","deviceList","isAddingDevice","handleTwoFactorCodeValidation","handleStoreTwoFactorDatabase","handleRemoveTwoFactorDevice","handleAddDeviceClick","devices","ev","preventDefault","token","imageURL","base32","showAlertSucc","forceUpdate","changed","undefined","deviceName","qrcodeUrl","toDataURL","otpauth_url","err","url","SecurityTab","Settings","JSON","stringify","currentSection","twoFactor","issuer","changeSection","handleTwoFactorAdd","handleTwoFactorRemove","createTwoFactorURL","e","selectedSection","innerHTML","device","timeStamp","randomString","addTwoFactor","resp","checkTwoFactorByAgainstUsername","res","removeTwoFactor","imageData","accountSection","bankingInfoSection","MFAInfoSection","sectionContent","usertype"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport CollapseWithHeader from \"../../../components/CollapseWithHeader\";\nimport QRCode from \"qrcode\";\nimport swal from \"sweetalert\";\nimport \"./scss/settings.scss\";\nimport { AffordableClient, AffordableHttpError } from \"affordable-client\";\nimport BankingInfoTab from \"./BankingInfoTab\";\nimport { AddTwoFactorComponent, ValidateTwoFactorComponent } from \"../../../components/TwoFactor/TwoFactor\";\nconst speakeasy = require(\"speakeasy\");\nconst randomstring = require(\"randomstring\");\nconst utils = require(\"../../../utils\");\n\n/*\n ***************************************************************************\n * Components that make up AccountTab start here\n ***************************************************************************\n */ \n\nclass EmailsTableEntry extends Component {\n  REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n  constructor(props) {\n    super(props);\n\n  \n    // An entry can be in three states:\n    // IDLE\n    // CHANGING_EMAIL\n    // DELETING\n    this.state = {\n      entryState: \"IDLE\",\n      email: this.props.email,\n      isPrimary: this.props.isPrimary,\n      username: this.props.user,\n      verified: this.props.verified,\n      city: \"\",\n      state: \"\",\n      ipAddr: \"\",\n      ipKey: \"4a51eca5db4bb71dc9fa9cf08dd6294a\"\n    };\n  }\n\n  componentDidMount() {\n    this.getIPAddr();\n  }\n\n  getIPAddr = () => {\n    fetch(\"http://api.ipstack.com/check?access_key=\" + this.state.ipKey, {\n      method: \"GET\"\n    })\n      .then(response => {\n        if (response.ok) {\n          return response.json();\n        }\n      })\n      .then(resData => {\n        this.setState({\n          ipAddr: resData.ip,\n          state: resData.region_name,\n          city: resData.city\n        });\n      });\n  };\n\n  setLastActivity = (name, act) => {\n    let date = new Date();\n    date = date.toString();\n    const data = {\n      state: this.state.state,\n      city: this.state.city,\n      IPAddr: this.state.ipAddr,\n      Timestamp: date,\n      username: name\n    }  \n    this.props.AffordableClient.addActivity(data).then(response => {\n      if(response.statusText === \"OK\") {\n        console.log(\"activity update success on login\");\n      } else {\n        console.log(\"unable to change activity\");\n      }\n    })\n  };\n\n  showAlertOnValidateEmail = () => {\n    if (\n      window.confirm(\n        \"Verify email: \" + document.getElementById(\"new-email\").value + \"?\"\n      )\n    ) {\n        const email = document.getElementById(\"new-email\").value;\n        if (email.length > 0) {\n          const oldEmail = this.state.email;\n          const data = new FormData();\n          data.append(\"email\", email);\n          this.props.client.updatePrimaryEmail(email)\n          .then(resData => {\n            window.location.reload(true);\n            \n          });\n        } else{\n          swal(\"Error\", \"No Email Entered. Please try again\", \"error\");\n        }\n    }\n  };\n\n  deleteEmail = () => {\n    this.setLastActivity(this.state.username, \"Deleted email\");\n\n    const data = {\n      email: this.state.email\n    }  \n    this.props.AffordableClient.deleteEmail(data).then(response => {\n      if(response.statusText === \"OK\") {\n        window.location.reload(true);\n      } else {\n        swal(\"Error\", \"unable to delete email\", \"error\");\n      }\n    })\n  };\n\n  makePrimary = () => {\n    this.setLastActivity(this.state.username, \"Changed primary email\");\n    const data = new FormData();\n    data.append(\"email\", this.state.email);\n\n    fetch(this.REACT_APP_AF_BACKEND_URL + \"/profile/make-primary\", {\n      method: \"POST\",\n      body: data\n    }).then(response => {\n      if (response.ok)\n        return response.json().then(resData => {\n          alert(resData.success);\n          window.location.reload(true);\n        });\n      else {\n        swal(\"Error\", \"unable to make primary email\", \"error\");\n      }\n    });\n  };\n\n  handleEntryStateChange = element => {\n    this.setState({\n      entryState: element.target.value\n    });\n  };\n\n  handleBackToIdle = () => {\n    this.setState({\n      entryState: \"IDLE\"\n    });\n  };\n\n  showAlertOnValidateSecondaryEmail = () => {\n    if (window.confirm(\"Verify email: \" + this.state.email + \"?\")) {\n      const email = this.state.email;\n      const data = {\n        email: email\n      }  \n      this.props.AffordableClient.checkEmail(data).then(response => {\n        if(response.statusText === \"OK\") {\n          const data2 = new FormData();\n          const randomstring = require(\"randomstring\");\n          data2.append(\"username\", this.state.username);\n          data2.append(\"newEmail\", email); //additional email\n          data2.append(\"oldEmail\", \"\"); //primary email for account\n          data2.append(\"randomString\", randomstring.generate());\n          data2.append(\"timestamp\", Date.now());\n          return fetch(\n            this.REACT_APP_AF_BACKEND_URL + \"/profile/add-secondary-email-verify\",\n            {\n              method: \"POST\",\n              body: data2\n            }\n          ).then(response => {\n            if (response.ok) {\n              this.setState({ name2: \"\", validateEmail: true });\n              swal(\"\", \"Please Check Your Email\", \"warning\");\n            } else {\n              swal(\"Error\", \"Please Try Again\", \"error\");\n            }\n          });\n        } \n      })\n    }\n  };\n\n  render() {\n    let dropdown = null;\n\n    switch (this.state.entryState) {\n      case \"IDLE\":\n        dropdown = <div></div>;\n        break;\n      case \"CHANGING_EMAIL\":\n        dropdown = (\n          <div className=\"row bottomMarginSmall\">\n            {/*This div serves as left padding*/}\n            <div className=\"col-2\"></div>\n\n            <div className=\"col\">\n              <button\n                className=\"btn btn-info bottomMarginSmall\"\n                onClick={this.handleBackToIdle}\n              >\n                Close Dropdown\n              </button>\n              <input\n                type=\"email\"\n                id=\"new-email\"\n                placeholder=\"Enter a new email\"\n                className=\"form-control bottomMarginSmall\"\n              />\n              <button\n                value=\"confirmChange\"\n                className=\"btn btn-warning\"\n                onClick={this.showAlertOnValidateEmail}\n              >\n                Confirm Change Email\n              </button>\n            </div>\n          </div>\n        );\n        break;\n\n      case \"DELETING\":\n        dropdown = (\n          <div className=\" row bottomMarginSmall\">\n            {/*This div serves as left padding*/}\n            <div className=\"col-2\"></div>\n\n            <div className=\"col\">\n              <button\n                className=\"btn btn-info bottomMarginSmall\"\n                onClick={this.handleBackToIdle}\n              >\n                Close Dropdown\n              </button>\n              <h3>\n                Are you sure you would like to delete {this.state.email} from\n                your account?\n              </h3>\n              <button\n                value=\"confirmDelete\"\n                className=\"btn btn-warning\"\n                onClick={this.deleteEmail}\n              >\n                Yes, Delete\n              </button>\n            </div>\n          </div>\n        );\n        break;\n\n      default:\n        console.log(\"ERROR\");\n    }\n\n    return (\n      <div>\n        <div className=\"row bottomMarginSmall\">\n          {/*PRIMARY COLUMN*/}\n          <div className=\"col-1\">\n            {this.state.isPrimary ? (\n              <div\n                className=\"customRadioButtonBorder marker markerTrue\"\n                onClick={this.makePrimary}\n              ></div>\n            ) : (\n              <div\n                className=\"customRadioButtonBorder marker markerFalse\"\n                id=\"secondaryEmail\"\n                onClick={this.makePrimary}\n              ></div>\n            )}\n          </div>\n\n          {/*VERIFIED COLUMN*/}\n          <div className=\"col-1\">\n            <h1>{this.props.verified ? \"✔\" : \"x\"}</h1>\n          </div>\n\n          {/*EMAIL COLUMN*/}\n          <div className=\"col\">\n            <h2 className=\"headingPaddingRightSmall\">{this.props.email}</h2>\n          </div>\n\n          {/*OPTIONS COLUMN*/}\n          <div className=\"col\">\n            <button\n              value=\"CHANGING_EMAIL\"\n              className=\"btn btn-primary\"\n              onClick={this.handleEntryStateChange}\n            >\n              Change Email\n            </button>\n            {this.state.isPrimary ? null : (\n              <button\n                value=\"DELETING\"\n                className=\"btn btn-danger\"\n                onClick={this.handleEntryStateChange}\n              >\n                Delete\n              </button>\n            )}\n\n            {!this.props.verified ? (\n              <button\n                value=\"VERIFYING\"\n                className=\"btn btn-info\"\n                onClick={this.showAlertOnValidateSecondaryEmail}\n              >\n                Resend Verification Email\n              </button>\n            ) : (\n              \"\"\n            )}\n          </div>\n        </div>\n\n        {/* THIS PART DEPENDS ON THE CURRENT STATE OF THE ENTRY*/}\n        {dropdown}\n      </div>\n    );\n  }\n}\n\nclass EmailsTablePanel extends Component {\n  REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      emails: [],\n      username: this.props.user\n    };\n\n    // handlers will go here\n  }\n\n  componentDidMount() {\n    this.props.client.getEmails(this.props.user).then(resData => {\n      console.log(resData.emails)\n      this.setState({\n        emails: resData.emails\n      });\n      console.log(\"Emails returned\" + this.state.emails)\n      console.log(this.state.emails.length)\n    });\n\n      // TODO: maybe alert of failure to fetch emails later\n  }\n\n  render() {\n    const username = this.state.username;\n    const client = this.props.client;\n    const entries = this.state.emails.map(function(element, idx) {\n      return (\n        <EmailsTableEntry\n          key={idx}\n          user={username}\n          email={element.email}\n          isPrimary={element.isPrimary}\n          verified={element.verified}\n          client={client}\n        />\n      );\n    });\n\n    return (\n      <CollapseWithHeader title=\"Email Management\" open={true}>\n        <div className=\"dropdownWrapper\">\n          <div className=\"row\">\n            <div className=\"col-1\">Primary</div>\n            <div className=\"col-1\">Verified</div>\n            <div className=\"col\">Email</div>\n            <div className=\"col\">Options</div>\n          </div>\n\n          {entries}\n        </div>\n      </CollapseWithHeader>\n    );\n  }\n}\n\nclass ResetPasswordPanel extends Component {\n  REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      changingPassword: false,\n      passwordsMatching: false,\n      username: this.props.user,\n      email: this.props.email,\n      passwordFeedback: [],\n      ipKey: \"4a51eca5db4bb71dc9fa9cf08dd6294a\",\n      city: \"\",\n      state: \"\",\n      ipAddr: \"\",\n      QRState: false\n    };\n\n    this.handlePasswordChange = this.handlePasswordChange.bind(this);\n    this.showAlertPasswordChange = this.showAlertPasswordChange.bind(this);\n    this.checkPasswordsMatching = this.checkPasswordsMatching.bind(this);\n    this.getIPAddr = this.getIPAddr.bind(this);\n    this.setLastActivity = this.setLastActivity.bind(this);\n    // this.requireTwoFactorChangePassword = this.requireTwoFactorChangePassword.bind(\n    //   this\n    // );\n    // this.handleValidateTwoFactor = this.handleValidateTwoFactor.bind(this);\n  }\n\n  setLastActivity(name) {\n    const data = new FormData();\n    let date = new Date();\n    date = date.toString();\n    data.append(\"state\", this.state.state);\n    data.append(\"city\", this.state.city);\n    data.append(\"IPAddr\", this.state.IPAddr);\n    data.append(\"Timestamp\", date);\n    data.append(\"Last_Act\", \"Password reset\");\n    data.append(\"username\", name);\n    fetch(this.REACT_APP_AF_BACKEND_URL + \"/activity/add-activity\", {\n      method: \"POST\",\n      body: data\n    }).then(response => {\n      if (response.ok)\n        return response.json().then(() => {\n          console.log(\"activity update success on login\");\n        });\n      else {\n        console.log(\"unable to change activity\");\n      }\n    });\n  }\n\n  getIPAddr() {\n    fetch(\"http://api.ipstack.com/check?access_key=\" + this.state.ipKey, {\n      method: \"GET\"\n    })\n      .then(response => {\n        if (response.ok) {\n          return response.json();\n        }\n      })\n      .then(resData => {\n        this.setState({\n          ipAddr: resData.ip,\n          state: resData.region_name,\n          city: resData.city\n        });\n      });\n  }\n  handlePasswordChange() {\n    this.setState({\n      changingPassword: !this.state.changingPassword\n    });\n  }\n  componentDidMount() {\n    this.getIPAddr();\n    // this.requireTwoFactorChangePassword();\n  }\n  showAlertPasswordChange() {\n    this.setLastActivity(this.state.username);\n    if (this.state.passwordsMatching) {\n      const currentPw = document.getElementById(\"current-pw\").value.toString();\n      const newPw = document.getElementById(\"new-pw-1\").value.toString();\n\n      this.props.client.changePassword(\n        currentPw, newPw\n      )\n        .then(() => {\n          swal(\n            \"Password Updated\",\n            \"Your password has now changed\",\n            \"success\"\n          );\n        })\n        .catch(error => {\n          console.log(error);\n          swal(\n            \"There was an error changing your password\",\n            error.message,\n            \"error\"\n          );\n        });\n      this.handlePasswordChange();\n    }\n  }\n\n  // requireTwoFactorChangePassword() {\n  //   const data = new FormData();\n  //   data.append(\"username\", this.state.username);\n  //   fetch(\"http://localhost:4000/profile/get-devices\", {\n  //     method: \"POST\",\n  //     body: data\n  //   }).then(response => {\n  //     if (response.ok)\n  //       return response.json().then(resData => {\n  //         if (resData.devices) {\n  //           this.setState({\n  //             QRState: true\n  //           });\n  //         }\n  //       });\n  //   });\n  // }\n\n  // handleValidateTwoFactor(event) {\n  //   console.log(\"validating two-factor for change password\");\n\n  //   event.preventDefault();\n  //   const data = new FormData();\n  //   const name = this.state.username;\n  //   const token = document.getElementById(\"token\").value;\n  //   const GoogleAuthOpt = this.state.QRState;\n  //   data.append(\"token\", token);\n  //   data.append(\"username\", name);\n  //   data.append(\"GoogleAuth\", GoogleAuthOpt);\n  //   fetch(\"http://localhost:4000/authentication/two-factor/username\", {\n  //     method: \"POST\",\n  //     body: data\n  //   })\n  //     .then(response => response.json())\n  //     .then(response => {\n  //       response.verified ? this.showAlertSucc2() : this.showAlertFail();\n  //     });\n  // }\n\n  // showAlertSucc2() {\n  //   swal(\"Success!\", \"Two factor code validated\", \"success\");\n  //   this.showAlertPasswordChange();\n  // }\n\n  // upon failure\n  showAlertFail() {\n    swal(\"Error\", \"Please Try Again\", \"error\");\n  }\n\n  checkPasswordsMatching() {\n    // TODO: can be improved but works for now\n    const pw1 = document.getElementById(\"new-pw-1\").value;\n    const pw2 = document.getElementById(\"new-pw-2\").value;\n\n    if (pw1 === pw2 && utils.passwordMeetsCriteria(pw1)) {\n      this.setState({\n        passwordsMatching: true,\n        passwordFeedback: [] // No feedback to give if the password criteria is met\n      });\n    } else {\n      const feedback = utils.getPasswordFeedback(pw1);\n\n      if (pw1 !== pw2) {\n        feedback.unshift(\"Passwords are not matching\");\n      }\n\n      this.setState({\n        passwordsMatching: false,\n        passwordFeedback: feedback\n      });\n    }\n  }\n\n  render() {\n    const QRAuthenticationForm = () => {\n      return (\n        <div className=\"row mt-5\">\n          <div className=\"col\" align=\"center\">\n            <input\n              type=\"text\"\n              id=\"token\"\n              placeholder=\"Enter 6-digit token from Google Authenticator App\"\n              className=\"form-control bottomMarginSmall\"\n            />\n            <br />\n            <button\n              // onClick={this.handleValidateTwoFactor}\n              id=\"authenticate\"\n              className=\"App-login-button2 bottomMarginSmall\"\n            >\n              Authenticate and Change Password\n            </button>\n          </div>\n        </div>\n      );\n    };\n\n    return (\n      <div>\n        {this.state.changingPassword ? (\n          <div>\n            <div className=\"d-flex bottomMarginSmall\">\n              <h2 className=\"headingPaddingRightSmall\">Password Management</h2>\n              <button\n                className=\"btn btn-warning\"\n                onClick={this.handlePasswordChange}\n              >\n                Discard Changes\n              </button>\n            </div>\n\n            <input\n              type=\"password\"\n              id=\"current-pw\"\n              placeholder=\"Enter Current Password\"\n              className=\"form-control bottomMarginSmall\"\n            />\n            <input\n              type=\"password\"\n              id=\"new-pw-1\"\n              placeholder=\"Enter New Password\"\n              className=\"form-control bottomMarginSmall\"\n              onChange={this.checkPasswordsMatching}\n            />\n            <input\n              type=\"password\"\n              id=\"new-pw-2\"\n              placeholder=\"Enter New Password Again\"\n              className=\"form-control bottomMarginSmall\"\n              onChange={this.checkPasswordsMatching}\n            />\n\n            {this.state.passwordsMatching ? (\n              <h3 className=\"bottomMarginSmall\">Passwords are matching</h3>\n            ) : (\n              <div>\n                <ul>\n                  {this.state.passwordFeedback.map(function(entry, idx) {\n                    return <li key={idx}>{entry}</li>;\n                  })}\n                </ul>\n              </div>\n            )}\n            {/* QR AUTHENTICATION */}\n            {this.state.QRState ? (\n              <QRAuthenticationForm />\n            ) : (\n              <button\n                className=\"btn btn-primary btnText bottomMarginSmall\"\n                id=\"resetPasswordBtn\"\n                onClick={this.showAlertPasswordChange}\n              >\n                Reset Password\n              </button>\n            )}\n          </div>\n        ) : (\n          <div className=\"d-flex\">\n            <h2 className=\"headingPaddingRightSmall\">Password Management</h2>\n            <button\n              className=\"btn btn-info\"\n              id=\"changePasswordBtn\"\n              onClick={this.handlePasswordChange}\n            >\n              Change\n            </button>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nclass PrimaryEmailChangePanel extends Component {\n  REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      changingEmail: false,\n      email: this.props.email,\n      username: this.props.user,\n      setup: false\n    };\n\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.handleEmailChangeSubmission = this.handleEmailChangeSubmission.bind(\n      this\n    );\n    this.showAlertOnValidateEmail = this.showAlertOnValidateEmail.bind(this);\n\n    // TODO: maybe handle some way of getting feedback for if the email submission went through\n  }\n\n  showAlertOnValidateEmail() {\n    if (\n      window.confirm(\n        \"Verify email: \" +\n          document.getElementById(\"change-primary-email\").value +\n          \"?\"\n      )\n    ) {\n      const email = document.getElementById(\"change-primary-email\").value;\n      const oldEmail = this.state.email; //gets old email from call to get-primary-email\n      const data = new FormData();\n      data.append(\"email\", email);\n\n      fetch(this.REACT_APP_AF_BACKEND_URL + \"/authentication/email\", {\n        method: \"POST\",\n        body: data\n      })\n        .then(response => {\n          if (response.ok) return response.json();\n        })\n        .then(resData => {\n          if (resData.emailIsUnique) {\n            const data2 = new FormData();\n            const randomstring = require(\"randomstring\");\n\n            data2.append(\"username\", this.state.username);\n            data2.append(\"newEmail\", email);\n            data2.append(\"oldEmail\", oldEmail);\n            data2.append(\"randomString\", randomstring.generate());\n            data2.append(\"timestamp\", Date.now());\n            return fetch(\n              this.REACT_APP_AF_BACKEND_URL + \"/profile/primary-email-change-verify\",\n              {\n                method: \"POST\",\n                body: data2\n              }\n            ).then(response => {\n              if (response.ok) {\n                this.setState({ name2: \"\", validateEmail: true });\n                swal(\"Error\", \"Please Check Your Email\", \"error\");\n              }\n            });\n          } else {\n            window.confirm(\n              \"Email: \" +\n                document.getElementById(\"change-primary-email\").value +\n                \" is already in the database\"\n            );\n            document.getElementById(\"change-primary-email\").value = \"\";\n          }\n        });\n    } else {\n      swal(\"Error\", \"Please Try Again\", \"error\");\n    }\n  }\n\n  handleEmailChange() {\n    this.setState({\n      changingEmail: !this.state.changingEmail\n    });\n  }\n\n  handleEmailChangeSubmission(event) {\n    console.log(event);\n  }\n\n  render() {\n    return (\n      <div className=\"emailChangeWrapper\">\n        {this.state.changingEmail ? (\n          <div>\n            <div className=\"d-flex bottomMarginSmall\">\n              <h2 className=\"headingPaddingRightSmall\">\n                Email(primary): {this.state.email}\n              </h2>\n              <button\n                className=\"btn btn-warning\"\n                onClick={this.handleEmailChange}\n              >\n                Discard Changes\n              </button>\n            </div>\n\n            <input\n              placeholder=\"Enter New Email\"\n              className=\"form-control bottomMarginSmall\"\n              id=\"change-primary-email\"\n            />\n            <button\n              className=\"btn btn-primary btnText\"\n              onClick={this.showAlertOnValidateEmail}\n            >\n              Validate\n            </button>\n          </div>\n        ) : (\n          <div className=\"d-flex\">\n            <h2 className=\"headingPaddingRightSmall\">\n              Email(primary): {this.state.email}\n            </h2>\n            <button className=\"btn btn-info\" onClick={this.handleEmailChange}>\n              Change\n            </button>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nclass SecondaryEmailChangePanel extends Component {\n  REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      changingEmail: false,\n      email: this.props.email,\n      username: this.props.user\n    };\n\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.handleEmailChangeSubmission = this.handleEmailChangeSubmission.bind(\n      this\n    );\n    this.showAlertOnValidateSecondaryEmail = this.showAlertOnValidateSecondaryEmail.bind(\n      this\n    );\n\n    // TODO: maybe handle some way of getting feedback for if the email submission went through\n  }\n  showAlertOnValidateSecondaryEmail() {\n    if (\n      window.confirm(\n        \"Verify email: \" +\n          document.getElementById(\"change-secondary-email\").value +\n          \"?\"\n      )\n    ) {\n      const email = document.getElementById(\"change-secondary-email\").value;\n      const data = new FormData();\n      data.append(\"email\", email);\n      fetch(this.REACT_APP_AF_BACKEND_URL + \"/authentication/email\", {\n        method: \"POST\",\n        body: data\n      })\n        .then(response => {\n          if (response.ok) return response.json();\n        })\n        .then(resData => {\n          if (resData.emailIsUnique) {\n            const data2 = new FormData();\n            const randomstring = require(\"randomstring\");\n            data2.append(\"username\", this.state.username);\n            data2.append(\"newEmail\", email); //additional email\n            data2.append(\"oldEmail\", this.state.email); //primary email for account\n            data2.append(\"randomString\", randomstring.generate());\n            data2.append(\"timestamp\", Date.now());\n            return fetch(\n              this.REACT_APP_AF_BACKEND_URL + \"/profile/add-secondary-email-verify\",\n              {\n                method: \"POST\",\n                body: data2\n              }\n            ).then(response => {\n              if (response.ok) {\n                const data3 = new FormData();\n                data3.append(\"username\", this.state.username);\n                data3.append(\"email\", email);\n                return fetch(\n                  this.REACT_APP_AF_BACKEND_URL + \"/profile/add-unverified-email\",\n                  {\n                    method: \"POST\",\n                    body: data3\n                  }\n                ).then(response => {\n                  if (response.ok) {\n                    this.setState({ name2: \"\", validateEmail: true });\n                    swal(\"\", \"Please Check Your Email\", \"warning\");\n                  }\n                });\n              }\n            });\n          } else {\n            window.confirm(\n              \"Email: \" +\n                document.getElementById(\"change-secondary-email\").value +\n                \" is already in the database\"\n            );\n            document.getElementById(\"change-secondary-email\").value = \"\";\n          }\n        });\n    } else {\n      swal(\"Error\", \"Please Try Again\", \"error\");\n    }\n  }\n\n  handleEmailChange() {\n    this.setState({\n      changingEmail: !this.state.changingEmail\n    });\n  }\n\n  handleEmailChangeSubmission(event) {\n    console.log(event);\n  }\n\n  render() {\n    return (\n      <div className=\"emailChangeWrapper\">\n        {this.state.changingEmail ? (\n          <div>\n            <div className=\"d-flex bottomMarginSmall\">\n              <h2 className=\"headingPaddingRightSmall\">Add an Email</h2>\n              <button className=\"addEmail\" onClick={this.handleEmailChange}>\n                Discard Changes\n              </button>\n            </div>\n\n            <input\n              placeholder=\"Enter New Email\"\n              className=\"form-control bottomMarginSmall\"\n              id=\"change-secondary-email\"\n            />\n            <button\n              className=\"btn btn-primary btnText\"\n              onClick={this.showAlertOnValidateSecondaryEmail}\n            >\n              Validate\n            </button>\n          </div>\n        ) : (\n          <div className=\"d-flex\">\n            <h2 className=\"headingPaddingRightSmall\" id=\"addEmailButton\">\n              Add an Email\n            </h2>\n            <button\n              className=\"btn btn-info\"\n              id=\"addEmailBtn\"\n              onClick={this.handleEmailChange}\n            >\n              Change\n            </button>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nclass AccountActivityPanel extends Component {\n  REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      time1: \"N/A\",\n      time2: \"N/A\",\n      time3: \"N/A\",\n      change1: \"N/A\",\n      change2: \"N/A\",\n      change3: \"N/A\",\n      username: this.props.user,\n      email: this.props.email,\n      times: [],\n      acts: []\n    };\n\n    this.handleActivityChange = this.handleActivityChange.bind(this);\n  }\n\n  handleActivityChange() {\n    const data = new FormData();\n    data.append(\"username\", this.state.username);\n\n    fetch(this.REACT_APP_AF_BACKEND_URL + \"/activity/get-activity\", {\n      method: \"POST\",\n      body: data\n    }).then(response => {\n      if (response.ok)\n        return response.json().then(resData => {\n          const size = resData.activities.length - 1;\n          this.setState({ acts: resData.activities });\n          if (this.state.acts[size]) {\n            this.setState({ change1: this.state.acts[size].Last_Act });\n          }\n          if (this.state.acts[size - 1]) {\n            this.setState({ change2: this.state.acts[size - 1].Last_Act });\n          }\n          if (this.state.acts[size - 2]) {\n            this.setState({ change3: this.state.acts[size - 2].Last_Act });\n          }\n        });\n      else {\n        swal(\"Error\", \"unable to see last activity\", \"error\");\n      }\n    });\n    const data2 = new FormData();\n    data2.append(\"username\", this.state.username);\n\n    fetch(this.REACT_APP_AF_BACKEND_URL + \"/activity/get-timestamp\", {\n      method: \"POST\",\n      body: data\n    }).then(response => {\n      if (response.ok)\n        return response.json().then(resData => {\n          const size = resData.Timelog.length - 1;\n          this.setState({ times: resData.Timelog });\n          if (this.state.times[size]) {\n            this.setState({ time1: this.state.times[size].Timestamp });\n          }\n          if (this.state.times[size - 1]) {\n            this.setState({ time2: this.state.times[size - 1].Timestamp });\n          }\n          if (this.state.times[size - 2]) {\n            this.setState({ time3: this.state.times[size - 2].Timestamp });\n          }\n        });\n      else {\n        swal(\"Error\", \"unable to see last activity time\", \"error\");\n      }\n    });\n  }\n\n  render() {\n    return (\n      <CollapseWithHeader title=\"Account Activity\" open={true}>\n        <div className=\"dropdownWrapper\">\n          <button\n            className=\"btn btn-primary activityButton\"\n            onClick={this.handleActivityChange}\n          >\n            Update Account Activity\n          </button>\n          <h2>Latest Login Times</h2>\n          <ol>\n            <li>{this.state.time1}</li>\n            <li>{this.state.time2}</li>\n            <li>{this.state.time3}</li>\n          </ol>\n\n          <h2>Latest Profile Changes</h2>\n          <ol>\n            <li>{this.state.change1}</li>\n            <li>{this.state.change2}</li>\n            <li>{this.state.change3}</li>\n          </ol>\n        </div>\n      </CollapseWithHeader>\n    );\n  }\n}\n\nclass AccountTab extends Component {\n  REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n  // TODO: Finish Account Panel\n  render() {\n    return (\n      <div>\n        <ResetPasswordPanel user={this.props.user} email={this.props.email} client={this.props.client}/>\n        {/* <PrimaryEmailChangePanel\n          user={this.props.user}\n          email={this.props.email}\n        />\n        <SecondaryEmailChangePanel\n          user={this.props.user}\n          email={this.props.email}\n        /> */}\n        <EmailsTablePanel \n          user={this.props.user}\n          client={this.props.client} \n        />\n        {/* <AccountActivityPanel user={this.props.user} email={this.props.email} />\n        {/* <AccountClosurePanel\n          user={this.props.user}\n          email={this.props.email}\n          props={this.props.childProps}\n        /> */}\n      </div>\n    );\n  }\n}\n\n/*\n ***************************************************************************\n * Components that make up SecurityTab start here\n ***************************************************************************\n */\nclass SecurityRecommendationsPanel extends Component {\n  REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n  render() {\n    return (\n      <CollapseWithHeader title=\"Security recommendations\" open={true}>\n        <div className=\"dropdownWrapper\">\n          <ul className=\"securityRecommendationsList\">\n            <li>Two-factor authentication for login</li>\n            <li>Add a back-up email address</li>\n            <li>\n              Use caution when accessing your account through public Wi-Fi\n            </li>\n            <li>\n              Enable timed log-off, especially when using public computers\n            </li>\n          </ul>\n        </div>\n      </CollapseWithHeader>\n    );\n  }\n}\n\nclass TwoFactorAuthenticationPanel extends Component {\n  REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n  constructor(props) {\n    super(props);\n\n    // TODO: Get initial state from server, and re-render if state changes\n    this.state = {\n      login: true,\n      passwordUpdates: false,\n      securitySettingChanges: true,\n      bankAccountWithdraw: false,\n      secret: speakeasy.generateSecret({ length: 20 }),\n      username: this.props.user,\n      email: this.props.email,\n      deviceList: [],\n      isAddingDevice: false\n    };\n\n    this.handleTwoFactorCodeValidation = this.handleTwoFactorCodeValidation.bind(\n      this\n    );\n    this.handleStoreTwoFactorDatabase = this.handleStoreTwoFactorDatabase.bind(\n      this\n    );\n    this.handleRemoveTwoFactorDevice = this.handleRemoveTwoFactorDevice.bind(\n      this\n    );\n    this.handleAddDeviceClick = this.handleAddDeviceClick.bind(this);\n  }\n\n  //when the page loads, a request is sent to the server to retrieve all two-factor devices for the user, and the results are populated into this.state.devices\n  componentDidMount() {\n    const data = new FormData();\n    data.append(\"username\", this.props.user);\n    fetch(this.REACT_APP_AF_BACKEND_URL + \"/profile/get-devices\", {\n      method: \"POST\",\n      body: data\n    }).then(response => {\n      if (response.ok)\n        return response.json().then(resData => {\n          this.setState({\n            deviceList: resData.devices\n          });\n        });\n    });\n  }\n\n  handleAddDeviceClick() {\n    this.setState({\n      isAddingDevice: true\n    });\n  }\n\n  //call then when user clicks Authenticate after inputting 6 digit token from google authenticator app\n  handleTwoFactorCodeValidation(ev) {\n    ev.preventDefault();\n\n    const data = new FormData();\n\n    const token = document.getElementById(\"token\").value;\n    data.append(\"token\", token);\n    // var x = this.state.tempvar; //Math.floor((Math.random() * 1000) + 1);\n    data.append(\"imageid\", this.state.imageURL);\n    data.append(\"secret\", this.state.secret.base32);\n\n    fetch(this.REACT_APP_AF_BACKEND_URL + \"/authentication/two-factor\", {\n      method: \"POST\",\n      body: data\n    })\n      .then(response => response.json())\n      .then(response => {\n        if (response.verified) {\n          this.showAlertSucc();\n          this.handleStoreTwoFactorDatabase();\n        } else {\n          this.showAlertFail();\n        }\n      });\n  }\n\n  showAlertSucc() {\n    swal(\n      \"Success!\",\n      \"your device now has 2 factor authentication! \\n We also recommend securing your device with a password to prevent fraud\",\n      \"success\"\n    );\n    this.forceUpdate();\n  }\n  showAlertFail() {\n    swal(\"Error\", \"Please Try Again\", \"error\");\n  }\n\n  handleStoreTwoFactorDatabase() {\n    const data = new FormData();\n    data.append(\"DeviceName\", document.getElementById(\"device-name\").value);\n    data.append(\"Username\", this.state.username);\n    data.append(\"Email\", this.state.email);\n    data.append(\"RandomString\", randomstring.generate());\n    data.append(\"Timestamp\", Date.now());\n    data.append(\"Secret\", this.state.secret.base32);\n\n    console.log(data);\n    fetch(this.REACT_APP_AF_BACKEND_URL + \"/profile/add-two-factor\", {\n      method: \"POST\",\n      body: data\n    })\n      .then(response => {\n        if (response.ok) {\n          return response.json();\n        }\n      })\n      .then(() => {});\n  }\n\n  handleRemoveTwoFactorDevice() {\n    const data = new FormData();\n    data.append(\n      \"DeviceName\",\n      document.getElementById(\"remove-device-name\").value\n    );\n    data.append(\"Username\", this.state.username);\n    data.append(\"Email\", this.state.email);\n\n    console.log(data);\n    fetch(this.REACT_APP_AF_BACKEND_URL + \"/profile/remove-two-factor\", {\n      method: \"POST\",\n      body: data\n    })\n      .then(response => {\n        if (response.ok) {\n          return response.json();\n        }\n      })\n      .then(resData => {\n        if (resData.changed) {\n          swal(\"Your Two Factor Device has been Removed!\", \"success\");\n        } else {\n          swal(\"Error!\", \"No device found with this name\", \"error\");\n        }\n      });\n  }\n\n  render() {\n    let devices = <p>None at the moment</p>;\n\n    if (\n      this.state.deviceList !== undefined &&\n      this.state.deviceList.length > 0\n    ) {\n      devices = this.state.deviceList.map(function(element, idx) {\n        return <li key={idx}>{element.deviceName}</li>;\n      });\n    }\n\n    // TODO: this is how you use qrcode dependency\n    let qrcodeUrl = \"\";\n\n    QRCode.toDataURL(this.state.secret.otpauth_url, function(err, url) {\n      qrcodeUrl = url;\n    });\n\n    return (\n      <CollapseWithHeader title=\"Two-Factor Authentication\" open={true}>\n        <div className=\"dropdownWrapper\">\n          <h2>Protected Actions</h2>\n          <br />\n\n          <div className=\"markerContainer\">\n            {this.state.login ? (\n              <div className=\"marker markerTrue\"></div>\n            ) : (\n              <div className=\"marker markerFalse\"></div>\n            )}\n            <p>Login</p>\n          </div>\n\n          <div className=\"markerContainer\">\n            {this.state.passwordUpdates ? (\n              <div className=\"marker markerTrue\"></div>\n            ) : (\n              <div className=\"marker markerFalse\"></div>\n            )}\n            <p>Password updates</p>\n          </div>\n\n          <div className=\"markerContainer\">\n            {this.state.securitySettingChanges ? (\n              <div className=\"marker markerTrue\"></div>\n            ) : (\n              <div className=\"marker markerFalse\"></div>\n            )}\n            <p>Security setting changes</p>\n          </div>\n\n          <div className=\"markerContainer\">\n            {this.state.bankAccountWithdraw ? (\n              <div className=\"marker markerTrue\"></div>\n            ) : (\n              <div className=\"marker markerFalse\"></div>\n            )}\n            <p>Bank Account Withdraw</p>\n          </div>\n\n          {/*Probably replace this image and or style differently*/}\n          <img\n            alt=\"google authentication\"\n            className=\"twoFactorImg\"\n            src=\"https://lh3.googleusercontent.com/HPc5gptPzRw3wFhJE1ZCnTqlvEvuVFBAsV9etfouOhdRbkp-zNtYTzKUmUVPERSZ_lAL=s180-rw\"\n          />\n\n          <p>\n            Use Google&apos;s Android or iPhone app for adding two token based\n            two factor authentication.\n          </p>\n\n          <div>\n            {/* The Device validation button is inside of the dropdown */}\n            {/* Set this.state.isAddingDevice to false after adding the device */}\n            <button\n              onClick={this.handleAddDeviceClick}\n              className=\"btn btn-warning twoFactorButton\"\n            >\n              Add Device\n            </button>\n            {this.state.isAddingDevice ? (\n              <div>\n                <img alt=\"QR Code\" src={qrcodeUrl} />\n                <input\n                  className=\"form-control bottomMarginSmall\"\n                  type=\"text\"\n                  id=\"device-name\"\n                  placeholder=\"Enter the name of your device\"\n                />\n                <input\n                  className=\"form-control bottomMarginSmall\"\n                  type=\"text\"\n                  id=\"token\"\n                  placeholder=\"Enter 6-digit code from Google Authenticator App\"\n                />\n\n                <button onClick={this.handleTwoFactorCodeValidation}>\n                  Validate\n                </button>\n              </div>\n            ) : (\n              <div className=\"bottomMarginSmall\"></div>\n            )}\n          </div>\n\n          <button\n            onClick={this.handleRemoveTwoFactorDevice}\n            className=\"btn btn-warning twoFactorButton\"\n          >\n            Remove Device\n          </button>\n          {/* Input textbox for remove device*/}\n          <input\n            type=\"text\"\n            className=\"removeDeviceInput\"\n            id=\"remove-device-name\"\n            placeholder=\"Enter Device To Remove\"\n          />\n\n          <h2>Registered Devices:</h2>\n          {/*Registered devices*/}\n          {devices}\n\n          <br />\n          {/*Placeholder QRCode*/}\n        </div>\n      </CollapseWithHeader>\n    );\n  }\n}\n\nclass SecurityTab extends Component {\n  REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n  // TODO: Finish Security Panel\n  render() {\n    return (\n      <div>\n        <SecurityRecommendationsPanel\n          user={this.props.user}\n          email={this.props.email}\n        />\n        <TwoFactorAuthenticationPanel\n          user={this.props.user}\n          email={this.props.email}\n        />\n      </div>\n    );\n  }\n}\n\n\n/*\n ***************************************************************************\n * The main Settings component starts here\n ***************************************************************************\n */\nclass Settings extends Component {\n\n  client = '';\n  REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n\n  constructor(props) {\n    super(props);\n\n    console.log(JSON.stringify(props));\n    this.client = props.client;\n\n    let name = `${props.user} @ Affordable Admin`\n\n    this.state = {\n      currentSection: \"Account\",\n      twoFactor: this.props.twoFactor,\n      username: this.props.user,\n      email: this.props.email,\n      imageURL: '',\n      secret: speakeasy.generateSecret({ length: 20, issuer: 'Affordable Admin', name: name })\n    };\n\n    // Whenever the a section is clicked, switch to it\n    this.changeSection = this.changeSection.bind(this);\n    this.handleTwoFactorAdd = this.handleTwoFactorAdd.bind(this);\n    this.handleTwoFactorRemove = this.handleTwoFactorRemove.bind(this);\n  }\n\n  componentDidMount() {\n    this.createTwoFactorURL();\n  }\n\n  changeSection(e) {\n    const selectedSection = e.target.innerHTML;\n\n    // If a different section is chosen, we want to go to it\n    if (selectedSection !== this.state.currentSection) {\n      this.setState({\n        currentSection: selectedSection\n      });\n    }\n  }\n\n  showAlertFail() {\n    alert(\"Please Try Again\");\n  }\n\n  handleTwoFactorAdd(ev) {\n    ev.preventDefault();\n\n    const token = document.getElementById(\"token\").value;\n    const device = document.getElementById(\"add-device-input\").value;\n    const timeStamp = Date.now().toString();\n    const randomString = randomstring.generate();\n    const secret = this.state.secret.base32;\n\n    const data = new FormData();\n    data.append(\"token\", token);\n    // var x = this.state.tempvar; //Math.floor((Math.random() * 1000) + 1);\n    data.append(\"imageid\", this.state.imageURL);\n    data.append(\"secret\", this.state.secret.base32);\n    console.log(\"secret:\", this.state.secret);\n\n    // var x = this.state.tempvar; //Math.floor((Math.random() * 1000) + 1);\n    console.log(\"secret:\", this.state.secret);\n    console.log(this.state.imageURL)\n\n    this.client\n      .twoFactor(token, this.state.imageURL, this.state.secret.base32)\n      .then(response => {\n        console.log(response);\n        if (response.verified) {\n          this.client.addTwoFactor(device, this.state.username, this.state.email, randomString, timeStamp, secret).then(resp => {\n            swal(\"You have registered your device for Two Factor Authentication!\")\n            this.setState({twoFactor: true})\n          }, resp => {\n            console.log(resp);\n            swal(\"Error setting up device for Two Factor Authentication, please try again later.\")\n          })\n        } else {\n          this.showAlertFail();\n        }\n      });\n  }\n\n  handleTwoFactorRemove() {\n    \n    // const data = new FormData();\n    const token = document.getElementById(\"token\").value;\n\n    this.props.client\n      .checkTwoFactorByAgainstUsername(this.state.username, token, \"true\")\n      .then(res => {\n        if (res.verified == true) {\n          this.client.removeTwoFactor(this.state.username, this.state.email).then(resp => {\n            swal(\"You have removed Two Factor Authentication from your account.\")\n            this.setState({twoFactor: false})\n          }, resp => {\n            console.log(resp);\n            swal(\"Error setting up device for Two Factor Authentication, please try again later.\")\n          });\n        }else {\n          this.showAlertFail();\n        }\n      });\n  }\n\n  createTwoFactorURL() {\n    QRCode.toDataURL(this.state.secret.otpauth_url, (err, imageData) => {\n      this.setState({\n        imageURL: imageData\n      });\n    });\n  }\n\n  render() {\n    let accountSection = (\n      <li onClick={this.changeSection} className=\"notSelectedStyle\">\n        Account\n      </li>\n    );\n    let bankingInfoSection = (\n      <li onClick={this.changeSection} id=\"bankingInfoTab\" className=\"notSelectedStyle\">\n        Banking Information\n      </li>\n    );\n    let MFAInfoSection = (\n      <li onClick={this.changeSection} id=\"modifyMFATab\" className=\"notSelectedStyle\">\n        Modify MFA\n      </li>\n    );\n\n    // let securitySection = (\n    //   <li\n    //     onClick={this.changeSection}\n    //     id=\"securityTab\"\n    //     className=\"notSelectedStyle\"\n    //   >\n    //     Security\n    //   </li>\n    // );\n    let sectionContent = null;\n    if (this.state.currentSection === \"Account\") {\n      accountSection = (\n        <li onClick={this.changeSection} className=\"selectedStyle\">\n          Account\n        </li>\n      );\n      sectionContent = (\n        <div className=\"tabPadding\">\n          <AccountTab \n            user={this.state.username} \n            email={this.state.email} \n            client={this.props.client}\n          />\n        </div>\n      );\n       } else if (this.state.currentSection === \"Banking Information\") { /* INSERTED */\n        bankingInfoSection = (\n          <li onClick={this.changeSection} className=\"selectedStyle\">\n            Banking Information\n          </li>\n        );\n        sectionContent = (\n          <div className=\"tabPadding\">\n            <BankingInfoTab user={this.state.username}\n                              usertype={this.state.usertype}\n                              email={this.state.email}/>\n          </div>\n        );\n      } else if (this.state.currentSection === \"Modify MFA\") {\n        MFAInfoSection = (\n          <li onClick={this.changeSection} className=\"selectedStyle\">\n            Modify MFA\n          </li>\n        );\n        if (this.state.twoFactor) {\n          sectionContent = (\n            <div>\n              <h3>Enter Code to Remove two Factor Authentication</h3>\n              <ValidateTwoFactorComponent handleValidateTwoFactor={this.handleTwoFactorRemove} buttonText={'Remove Two Factor'} />\n            </div>\n          );\n        } else {\n          console.log(this.state.imageURL)\n          sectionContent = (\n            <div>\n              <h3>Add Two Factor Authentication Here</h3>\n              <AddTwoFactorComponent handleTwoFactorCodeValidation={this.handleTwoFactorAdd} imageURL={this.state.imageURL}/>\n            </div>\n          );\n        }\n        \n      }\n    \n    \n    // } else if (this.state.currentSection === \"Security\") {\n    //   securitySection = (\n    //     <li onClick={this.changeSection} className=\"selectedStyle\">\n    //       Security\n    //     </li>\n    //   );\n      // sectionContent = (\n      //   <div className=\"tabPadding\">\n      //     <SecurityTab user={this.state.username} email={this.state.email} />\n      //   </div>\n      // );\n      // }\n\n    return (\n      <div className=\"col\">\n        <div>\n          {/* Settings Menu Sections */}\n          <div>\n            <h1 className=\"headingStyle\">{this.state.currentSection}</h1>\n            <ul className=\"sectionBarStyle\">\n              {accountSection}\n              {bankingInfoSection}\n              {MFAInfoSection}\n              {/* {securitySection} */}\n            </ul>\n          </div>\n        </div>\n\n        {/* The section content depends on the state of the component */}\n        {sectionContent}\n      </div>\n    );\n  }\n}\n\nexport default Settings;\n"]},"metadata":{},"sourceType":"module"}