{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _api = require('../api');\n\nvar _api2 = _interopRequireDefault(_api);\n\nvar _onFailError = require('../utils/onFailError');\n\nvar _onFailError2 = _interopRequireDefault(_onFailError);\n\nvar _iconsSvg = require('../icons-svg');\n\nvar _iconsSvg2 = _interopRequireDefault(_iconsSvg);\n\nvar _translations = require('../translations');\n\nvar _translations2 = _interopRequireDefault(_translations);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar label = 'remove';\n\nfunction _handler(apiOptions, actions) {\n  var _this = this;\n\n  var showDialog = actions.showDialog,\n      hideDialog = actions.hideDialog,\n      navigateToDir = actions.navigateToDir,\n      updateNotifications = actions.updateNotifications,\n      getSelectedResources = actions.getSelectedResources,\n      getResource = actions.getResource,\n      getNotifications = actions.getNotifications;\n\n  var getMessage = _translations2.default.bind(null, apiOptions.locale);\n\n  var selectedResources = getSelectedResources();\n  var dialogFilesText = selectedResources.length > 1 ? selectedResources.length + ' ' + getMessage('files') : '\"' + selectedResources[0].name + '\"';\n  var dialogNameText = getMessage('reallyRemove', {\n    files: dialogFilesText\n  });\n  var rawDialogElement = {\n    elementType: 'ConfirmDialog',\n    elementProps: {\n      onHide: hideDialog,\n      onSubmit: function () {\n        var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {\n          var resource;\n          return _regenerator2.default.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  hideDialog();\n                  _context.prev = 1;\n                  _context.next = 4;\n                  return _api2.default.removeResources(apiOptions, selectedResources);\n\n                case 4:\n                  resource = getResource();\n                  navigateToDir(resource.id, null, false);\n                  _context.next = 12;\n                  break;\n\n                case 8:\n                  _context.prev = 8;\n                  _context.t0 = _context['catch'](1);\n                  (0, _onFailError2.default)({\n                    getNotifications: getNotifications,\n                    label: getMessage(label),\n                    notificationId: 'delete',\n                    updateNotifications: updateNotifications\n                  });\n                  console.log(_context.t0);\n\n                case 12:\n                case 'end':\n                  return _context.stop();\n              }\n            }\n          }, _callee, _this, [[1, 8]]);\n        }));\n\n        return function onSubmit() {\n          return _ref.apply(this, arguments);\n        };\n      }(),\n      headerText: getMessage('remove'),\n      messageText: dialogNameText,\n      cancelButtonText: getMessage('cancel'),\n      submitButtonText: getMessage('confirm')\n    }\n  };\n  showDialog(rawDialogElement);\n}\n\nexports.default = function (apiOptions, actions) {\n  var localeLabel = (0, _translations2.default)(apiOptions.locale, label);\n  var getSelectedResources = actions.getSelectedResources;\n  return {\n    id: 'delete',\n    icon: {\n      svg: _iconsSvg2.default.delete\n    },\n    label: localeLabel,\n    shouldBeAvailable: function shouldBeAvailable(apiOptions) {\n      var selectedResources = getSelectedResources();\n\n      if (!selectedResources.length) {\n        return false;\n      }\n\n      return selectedResources.every(function (resource) {\n        return resource.capabilities.canDelete;\n      });\n    },\n    availableInContexts: ['row', 'toolbar'],\n    handler: function handler() {\n      return _handler(apiOptions, actions);\n    }\n  };\n};","map":{"version":3,"sources":["/home/ubuntu/Connor/Demo_OSU_Filemanager/node_modules/@opuscapita/react-filemanager-connector-node-v1/lib/capabilities/delete-resource.js"],"names":["Object","defineProperty","exports","value","_regenerator","require","_regenerator2","_interopRequireDefault","_asyncToGenerator2","_asyncToGenerator3","_api","_api2","_onFailError","_onFailError2","_iconsSvg","_iconsSvg2","_translations","_translations2","obj","__esModule","default","label","_handler","apiOptions","actions","_this","showDialog","hideDialog","navigateToDir","updateNotifications","getSelectedResources","getResource","getNotifications","getMessage","bind","locale","selectedResources","dialogFilesText","length","name","dialogNameText","files","rawDialogElement","elementType","elementProps","onHide","onSubmit","_ref","mark","_callee","resource","wrap","_callee$","_context","prev","next","removeResources","id","t0","notificationId","console","log","stop","apply","arguments","headerText","messageText","cancelButtonText","submitButtonText","localeLabel","icon","svg","delete","shouldBeAvailable","every","capabilities","canDelete","availableInContexts","handler"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _api = require('../api');\n\nvar _api2 = _interopRequireDefault(_api);\n\nvar _onFailError = require('../utils/onFailError');\n\nvar _onFailError2 = _interopRequireDefault(_onFailError);\n\nvar _iconsSvg = require('../icons-svg');\n\nvar _iconsSvg2 = _interopRequireDefault(_iconsSvg);\n\nvar _translations = require('../translations');\n\nvar _translations2 = _interopRequireDefault(_translations);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar label = 'remove';\n\nfunction _handler(apiOptions, actions) {\n  var _this = this;\n\n  var showDialog = actions.showDialog,\n      hideDialog = actions.hideDialog,\n      navigateToDir = actions.navigateToDir,\n      updateNotifications = actions.updateNotifications,\n      getSelectedResources = actions.getSelectedResources,\n      getResource = actions.getResource,\n      getNotifications = actions.getNotifications;\n\n\n  var getMessage = _translations2.default.bind(null, apiOptions.locale);\n\n  var selectedResources = getSelectedResources();\n\n  var dialogFilesText = selectedResources.length > 1 ? selectedResources.length + ' ' + getMessage('files') : '\"' + selectedResources[0].name + '\"';\n\n  var dialogNameText = getMessage('reallyRemove', { files: dialogFilesText });\n\n  var rawDialogElement = {\n    elementType: 'ConfirmDialog',\n    elementProps: {\n      onHide: hideDialog,\n      onSubmit: function () {\n        var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {\n          var resource;\n          return _regenerator2.default.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  hideDialog();\n                  _context.prev = 1;\n                  _context.next = 4;\n                  return _api2.default.removeResources(apiOptions, selectedResources);\n\n                case 4:\n                  resource = getResource();\n\n                  navigateToDir(resource.id, null, false);\n                  _context.next = 12;\n                  break;\n\n                case 8:\n                  _context.prev = 8;\n                  _context.t0 = _context['catch'](1);\n\n                  (0, _onFailError2.default)({\n                    getNotifications: getNotifications,\n                    label: getMessage(label),\n                    notificationId: 'delete',\n                    updateNotifications: updateNotifications\n                  });\n                  console.log(_context.t0);\n\n                case 12:\n                case 'end':\n                  return _context.stop();\n              }\n            }\n          }, _callee, _this, [[1, 8]]);\n        }));\n\n        return function onSubmit() {\n          return _ref.apply(this, arguments);\n        };\n      }(),\n      headerText: getMessage('remove'),\n      messageText: dialogNameText,\n      cancelButtonText: getMessage('cancel'),\n      submitButtonText: getMessage('confirm')\n    }\n  };\n\n  showDialog(rawDialogElement);\n}\n\nexports.default = function (apiOptions, actions) {\n  var localeLabel = (0, _translations2.default)(apiOptions.locale, label);\n  var getSelectedResources = actions.getSelectedResources;\n\n  return {\n    id: 'delete',\n    icon: { svg: _iconsSvg2.default.delete },\n    label: localeLabel,\n    shouldBeAvailable: function shouldBeAvailable(apiOptions) {\n      var selectedResources = getSelectedResources();\n\n      if (!selectedResources.length) {\n        return false;\n      }\n\n      return selectedResources.every(function (resource) {\n        return resource.capabilities.canDelete;\n      });\n    },\n    availableInContexts: ['row', 'toolbar'],\n    handler: function handler() {\n      return _handler(apiOptions, actions);\n    }\n  };\n};"]},"metadata":{},"sourceType":"script"}