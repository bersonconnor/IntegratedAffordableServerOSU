{"ast":null,"code":"import _regeneratorRuntime from \"/home/ubuntu/Connor/SandBoxOSU/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/ubuntu/Connor/SandBoxOSU/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/ubuntu/Connor/SandBoxOSU/app/src/pages/MainPages/HUGPages/HUGPagesRoutingContainer/manage.js\";\nimport React, { Component, Fragment } from \"react\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport \"../../../../styles/buttons.css\";\nimport \"./scss/search.scss\";\nimport \"react-table/react-table.css\";\nimport \"./scss/search.scss\";\nimport ReactPaginate from 'react-paginate';\nimport { Button, Card, ProgressBar } from \"react-bootstrap\";\nimport { UserIDContext } from \"../../MainPagesRoutingContainer/index.tsx\";\nimport { RepresentingOrgIDContext } from \"../../MainPagesRoutingContainer/index.tsx\"; // Manage\n// This page reflects much of the behavior of the HUG Search page and\n// therefore some of the methods are reused or only slightly modified\n// A major distinction is that this page limits the data displayed to the\n// organization that the user is representing\n\nvar userID = 0;\nvar orgID = 0; // capture the user id of the current user logged in from the context\n\nvar UserIDVal = ID => {\n  userID = ID.ID;\n  return null;\n}; // capture the organization the user is representing from the context\n\n\nvar OrgIDVal = orgId => {\n  orgID = orgId.id;\n  console.log(\"Manage Has Representing Org ID\");\n  console.log(orgID);\n  return null;\n}; //to display search results\n\n\nvar searchCards = props => {\n  {\n    console.log(\"Properties of search card\");\n  }\n  {\n    console.log(props);\n  }\n\n  if (props.grants.length === 0) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 12\n      }\n    });\n  } else {\n    var searchCardsResults = [];\n\n    for (var i = props.currentPage * 9 - 9; i < props.currentPage * 9 && i < props.grants.length; i++) {\n      // I think we just need to change out props.grants.length\n      //for (let i = props.currentPage - 1; i < props.currentPage; i++) {\n      var hugID = props.grants[i].grant.ID;\n      var hugName = props.grants[i].grant.grantName;\n      var hugAmount = props.grants[i].grant.grantAmount;\n      var hugDescription = props.grants[i].grant.purpose;\n      var hugCategory = props.grants[i].grant.grantCategory;\n      var medicalCategory = props.grants[i].grant.medicalCategory;\n      var hugDeadline = props.grants[i].grant.dateEnd; //  const location = props.grants[i].locations.state;\n\n      var ageLow = null;\n      var ageHigh = null;\n      var ageFilter = \" - \"; //funding status of hug\n\n      var f = props.grants[i].grant.fundingStatus;\n      var numPeople = props.grants[i].grant.numPeopleDonated; //get the number of people that donated to the hug\n\n      searchCardsResults.push(hugCard(hugID, hugName, hugAmount, numPeople, f));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-deck\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 12\n      }\n    }, searchCardsResults);\n  }\n}; //hug card in search results\n\n\nvar hugCard = (hugID, hugName, hugAmount, numPeopleDonated, amountRaised) => {\n  var percentRaised = Math.round(amountRaised / hugAmount * 100); //if percent is a small fraction\n\n  if (percentRaised < 1) {\n    percentRaised = 1;\n  } //if hug percent is fulfilled\n\n\n  if (percentRaised > 100) {\n    percentRaised = 100;\n  }\n\n  var progressInstance = /*#__PURE__*/React.createElement(ProgressBar, {\n    variant: \"success\",\n    now: percentRaised,\n    label: \"\".concat(percentRaised, \"%\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 5\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-deck\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    bg: \"light\",\n    style: {\n      width: \"28rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Card.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, hugName.toUpperCase(), \" | $\", hugAmount), /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, \"$\", amountRaised, \" has been raised\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, \"Funding Status\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-2 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }), \"$0\", /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }, progressInstance), \"$\", hugAmount)), /*#__PURE__*/React.createElement(Card.Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }, \"Number of people that donated: \", numPeopleDonated))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"submit-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, \"Manage\"))));\n}; //to display donor HUG results\n\n\nvar donorHUGs = props => {\n  if (props.grants.length === 0) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 12\n      }\n    });\n  } else {\n    var donorCardsResults = [];\n\n    for (var i = 0; i < props.grants.length; i++) {\n      var hugID = props.grants[i].grant.ID;\n      var hugName = props.grants[i].grant.grantName;\n      var hugAmount = props.grants[i].grant.grantAmount; //funding status of hug\n\n      var f = props.grants[i].grant.fundingStatus;\n      var peopleDonated = props.grants[i].grant.numPeopleDonated;\n      donorCardsResults.push(hugCard(hugID, hugName, hugAmount, peopleDonated, f));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-deck\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 12\n      }\n    }, donorCardsResults);\n  }\n};\n\nclass Manage extends Component {\n  constructor(_props) {\n    var _this;\n\n    super(_props);\n    _this = this;\n    this.REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n\n    this.handleChange = key => {\n      return event => {\n        this.setState({\n          [key]: event.target.value\n        });\n      };\n    };\n\n    this.updateCurrentPage = current => {\n      console.log(\"Updating the page\", current);\n      this.setState({\n        currentPage: current.selected + 1\n      });\n    };\n\n    this.handleQuery = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        var data, dataID, grant, eligibility, locations, grantResults, grantCopy, _loop, i, props;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                data = new FormData();\n                dataID = new FormData();\n                grant = [];\n                eligibility = [];\n                locations = [];\n                data.append(\"orgID\", orgID);\n                console.log(\"in handleQuery\");\n                _context2.next = 9;\n                return fetch(_this.REACT_APP_AF_BACKEND_URL + \"/manage/managegrants\", {\n                  method: \"POST\",\n                  body: data\n                }).then(response => response.json()).then(resJson => {\n                  console.log(\"entered fuflfilled\", resJson);\n\n                  if (resJson != null && resJson.grants != \"None\") {\n                    dataID.append(\"grantIDs\", JSON.stringify(resJson.IDs));\n\n                    for (var i = 0; i < resJson.grants.length; i++) {\n                      grant.push(resJson.grants[i]);\n                    }\n                  }\n                });\n\n              case 9:\n                console.log(\"Grant Value\", grant);\n\n                if (!dataID.has(\"grantIDs\")) {\n                  _context2.next = 15;\n                  break;\n                }\n\n                _context2.next = 13;\n                return fetch(_this.REACT_APP_AF_BACKEND_URL + \"/search/eligibility\", {\n                  method: \"POST\",\n                  body: dataID\n                }).then(response => response.json()).then(resJson => {\n                  // console.log(resJson);\n                  if (resJson != null && resJson.eligibility != \"None\") {\n                    for (var i = 0; i < resJson.eligibility.length; i++) {\n                      eligibility.push(resJson.eligibility[i]);\n                    }\n                  }\n                });\n\n              case 13:\n                _context2.next = 15;\n                return fetch(_this.REACT_APP_AF_BACKEND_URL + \"/search/locations\", {\n                  method: \"POST\",\n                  body: dataID\n                }).then(response => response.json()).then(resJson => {\n                  // console.log(resJson);\n                  if (resJson != null && resJson.locations != \"None\") {\n                    for (var i = 0; i < resJson.locations.length; i++) {\n                      locations.push(resJson.locations[i]);\n                    }\n                  }\n                });\n\n              case 15:\n                //call cards here\n                grantResults = []; // checking for grant id match and adding the funding status to grant array\n\n                grantCopy = [];\n                grantCopy = grant;\n                _loop = /*#__PURE__*/_regeneratorRuntime.mark(function _loop(i) {\n                  var grantID, status;\n                  return _regeneratorRuntime.wrap(function _loop$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          if (!grant[i].ID) {\n                            _context.next = 7;\n                            break;\n                          }\n\n                          grantID = grant[i].ID;\n                          status = false;\n                          _context.next = 5;\n                          return fetch(_this.REACT_APP_AF_BACKEND_URL + \"/search/fundingStatus?grantID=\" + grantID, {\n                            method: \"GET\"\n                          }).then(response => {\n                            status = response.ok;\n                            return response.json();\n                          }).then(data => {\n                            if (status) {\n                              if (data.status === \"OK\") {\n                                var grantsCopy = grant;\n                                var funding = data.fundingStatus[0].fundingStatus;\n                                console.log('data in status okay', funding);\n                                grantsCopy[i]['fundingStatus'] = funding;\n                                grant[i] = grantCopy[i];\n                              }\n                            } else {// =>issue getting funding status\n                            }\n                          });\n\n                        case 5:\n                          _context.next = 7;\n                          return fetch(_this.REACT_APP_AF_BACKEND_URL + \"/manage/managedonates?grantID=\" + grantID, {\n                            method: \"GET\"\n                          }).then(response => {\n                            status = response.ok;\n                            return response.json();\n                          }).then(data => {\n                            if (status) {\n                              console.log(\"The status returned\", data.status);\n\n                              if (data.status === \"OK\") {\n                                console.log(\"Adding donate info\");\n                                var grantsCopy = grant;\n                                var donates = data.donates;\n                                console.log('data for number of people donated', donates);\n                                grantsCopy[i]['numPeopleDonated'] = donates;\n                                grant[i] = grantCopy[i];\n                              }\n                            } else {// =>issue getting funding status\n                            }\n                          });\n\n                        case 7:\n                          ;\n                          grantResults.push({\n                            grant: grant[i],\n                            eligibility: eligibility[i],\n                            locations: locations[i]\n                          });\n\n                        case 9:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _loop);\n                });\n                i = 0;\n\n              case 20:\n                if (!(i < grant.length)) {\n                  _context2.next = 25;\n                  break;\n                }\n\n                return _context2.delegateYield(_loop(i), \"t0\", 22);\n\n              case 22:\n                i++;\n                _context2.next = 20;\n                break;\n\n              case 25:\n                // console.log('so', grantResults);\n                _this.state.grantCopyInfo = grantResults;\n                console.log(\"The Grant Results\");\n                console.log(grantResults);\n\n                _this.setState({\n                  pageCount: grantResults.length / 9\n                });\n\n                _this.setState({\n                  grants: grantResults\n                });\n\n                props = {\n                  grants: _this.state.grants,\n                  handleChange: _this.handleChange,\n                  handleFundingStatus: _this.handleFundingStatus,\n                  currentPage: _this.state.currentPage\n                };\n                return _context2.abrupt(\"return\", props);\n\n              case 32:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    this.state = {\n      grants: [],\n      pageCount: 0,\n      currentPage: 1\n    };\n    this.handleChange = this.handleChange.bind(this); //this.handleFundingStatus = this.handleFundingStatus.bind(this);\n\n    this.handleQuery = this.handleQuery.bind(this);\n    this.updateCurrentPage = this.updateCurrentPage.bind(this);\n  }\n  /*Handle Event Functions*/\n\n\n  //handle hug funding status\n  //this function works and handle hug status value but is currently not being used\n  // due to async call not updating in frontend immediately\n  // handleFundingStatus = async () => {\n  //   let status = false;\n  //   await fetch(\n  //     \"http://localhost:4000/manage/fundingStatus?donorID=\" + userID,\n  //     {\n  //       method: \"GET\"\n  //     }\n  //   )\n  //     .then(response => {\n  //       status = response.ok;\n  //       return response.json();\n  //     })\n  //     .then(data => {});\n  // };\n  componentDidMount() {\n    if (!window.location.hash) {\n      //setting window location\n      var hugsOrg = this.handleQuery();\n      window.location.assign(window.location + \"#loaded\"); //using reload() method to reload web page\n    }\n  }\n\n  render() {\n    var donorHugs = [];\n    var props = {\n      grants: this.state.grants,\n      currentPage: this.state.currentPage\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 15\n      }\n    }, searchCards(props)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(ReactPaginate, {\n      previousLabel: 'previous',\n      nextLabel: 'next',\n      breakLabel: '...',\n      breakClassName: 'page-item',\n      onPageChange: this.updateCurrentPage,\n      pageCount: this.state.pageCount,\n      marginPagesDisplayed: 2,\n      pageRangeDisplayed: 5,\n      containerClassName: 'pagination',\n      subContainerClassName: 'pages pagination',\n      activeClassName: 'active',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(RepresentingOrgIDContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 13\n      }\n    }, value => /*#__PURE__*/React.createElement(OrgIDVal, {\n      id: value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 25\n      }\n    })))));\n  }\n\n}\n\nexport default Manage;","map":{"version":3,"sources":["/home/ubuntu/Connor/SandBoxOSU/app/src/pages/MainPages/HUGPages/HUGPagesRoutingContainer/manage.js"],"names":["React","Component","Fragment","LinkContainer","ReactPaginate","Button","Card","ProgressBar","UserIDContext","RepresentingOrgIDContext","userID","orgID","UserIDVal","ID","OrgIDVal","orgId","id","console","log","searchCards","props","grants","length","searchCardsResults","i","currentPage","hugID","grant","hugName","grantName","hugAmount","grantAmount","hugDescription","purpose","hugCategory","grantCategory","medicalCategory","hugDeadline","dateEnd","ageLow","ageHigh","ageFilter","f","fundingStatus","numPeople","numPeopleDonated","push","hugCard","amountRaised","percentRaised","Math","round","progressInstance","width","toUpperCase","donorHUGs","donorCardsResults","peopleDonated","Manage","constructor","REACT_APP_AF_BACKEND_URL","process","env","window","handleChange","key","event","setState","target","value","updateCurrentPage","current","selected","handleQuery","e","data","FormData","dataID","eligibility","locations","append","fetch","method","body","then","response","json","resJson","JSON","stringify","IDs","has","grantResults","grantCopy","grantID","status","ok","grantsCopy","funding","donates","state","grantCopyInfo","pageCount","handleFundingStatus","bind","componentDidMount","location","hash","hugsOrg","assign","render","donorHugs"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport \"../../../../styles/buttons.css\";\nimport \"./scss/search.scss\";\nimport \"react-table/react-table.css\";\nimport \"./scss/search.scss\";\nimport ReactPaginate from 'react-paginate';\nimport { Button, Card, ProgressBar } from \"react-bootstrap\";\nimport { UserIDContext } from \"../../MainPagesRoutingContainer/index.tsx\";\nimport { RepresentingOrgIDContext } from \"../../MainPagesRoutingContainer/index.tsx\";\n\n// Manage\n// This page reflects much of the behavior of the HUG Search page and\n// therefore some of the methods are reused or only slightly modified\n// A major distinction is that this page limits the data displayed to the\n// organization that the user is representing\nlet userID = 0;\nlet orgID = 0;\n// capture the user id of the current user logged in from the context\nconst UserIDVal = ID => {\n  userID = ID.ID;\n  return null;\n};\n// capture the organization the user is representing from the context\nconst OrgIDVal = orgId => {\n  orgID = orgId.id;\n  console.log(\"Manage Has Representing Org ID\");\n  console.log(orgID);\n  return null;\n};\n\n//to display search results\nconst searchCards = (props) => {\n  {console.log(\"Properties of search card\")}\n{ console.log(props)}\n  if (props.grants.length === 0) {\n    return <div />;\n  } else {\n    const searchCardsResults = [];\n  for (let i = props.currentPage*9 - 9; i < props.currentPage*9 && i<props.grants.length; i++) { // I think we just need to change out props.grants.length\n  //for (let i = props.currentPage - 1; i < props.currentPage; i++) {\n      const hugID = props.grants[i].grant.ID;\n      const hugName = props.grants[i].grant.grantName;\n      const hugAmount = props.grants[i].grant.grantAmount;\n      const hugDescription = props.grants[i].grant.purpose;\n      const hugCategory = props.grants[i].grant.grantCategory;\n      const medicalCategory = props.grants[i].grant.medicalCategory;\n      const hugDeadline = props.grants[i].grant.dateEnd;\n    //  const location = props.grants[i].locations.state;\n      let ageLow = null;\n      let ageHigh = null;\n      let ageFilter = \" - \";\n\n\n      //funding status of hug\n      const f = props.grants[i].grant.fundingStatus;\n      const numPeople = props.grants[i].grant.numPeopleDonated;\n\n      //get the number of people that donated to the hug\n\n\n      searchCardsResults.push(\n        hugCard(hugID, hugName, hugAmount, numPeople , f)\n      );\n    }\n    return <div className=\"card-deck\">{searchCardsResults}</div>;\n  }\n};\n\n//hug card in search results\nconst hugCard = (hugID, hugName, hugAmount, numPeopleDonated, amountRaised) => {\n  let percentRaised = Math.round((amountRaised / hugAmount) * 100);\n  //if percent is a small fraction\n  if(percentRaised<1)\n  {\n    percentRaised = 1;\n  }\n  //if hug percent is fulfilled\n  if(percentRaised >100)\n  {\n    percentRaised = 100;\n  }\n\n  const progressInstance = (\n    <ProgressBar\n      variant=\"success\"\n      now={percentRaised}\n      label={`${percentRaised}%`}\n    />\n  );\n  return (\n    <div className=\"card-deck\">\n      <Card bg=\"light\" style={{ width: \"28rem\" }}>\n        <Card.Header>\n          {hugName.toUpperCase()} | ${hugAmount}\n        </Card.Header>\n        <Card.Body>\n          <Card.Title>${amountRaised} has been raised</Card.Title>\n          <br />\n          <div className=\"form-group-row\">\n            <label>Funding Status</label>\n            <div className=\"form-group row\">\n              <label className=\"col-2 col-form-label\" />\n              $0\n              <div className=\"col-8\">{progressInstance}</div>${hugAmount}\n            </div>\n          </div>\n          <Card.Text>\n            <ul>\n              <li>Number of people that donated: {numPeopleDonated}</li>\n            </ul>\n          </Card.Text>\n          <button className=\"submit-button\">Manage</button>\n        </Card.Body>\n      </Card>\n    </div>\n  );\n};\n\n//to display donor HUG results\nconst donorHUGs = props => {\n  if (props.grants.length === 0) {\n    return <div />;\n  } else {\n    const donorCardsResults = [];\n    for (let i = 0; i < props.grants.length; i++) {\n      const hugID = props.grants[i].grant.ID;\n      const hugName = props.grants[i].grant.grantName;\n      const hugAmount = props.grants[i].grant.grantAmount;\n\n      //funding status of hug\n      const f = props.grants[i].grant.fundingStatus;\n      const peopleDonated = props.grants[i].grant.numPeopleDonated;\n\n      donorCardsResults.push(\n        hugCard(hugID, hugName, hugAmount,peopleDonated, f)\n      );\n    }\n    return <div className=\"card-deck\">{donorCardsResults}</div>;\n  }\n};\nclass Manage extends Component {\n  REACT_APP_AF_BACKEND_URL = process.env.REACT_APP_AF_BACKEND_URL || window.REACT_APP_AF_BACKEND_URL;\n  constructor(props) {\n    super(props);\n    this.state = {\n      grants: [],\n      pageCount: 0,\n      currentPage: 1\n     };\n    this.handleChange = this.handleChange.bind(this);\n    //this.handleFundingStatus = this.handleFundingStatus.bind(this);\n    this.handleQuery = this.handleQuery.bind(this);\n    this.updateCurrentPage = this.updateCurrentPage.bind(this);\n  }\n\n  /*Handle Event Functions*/\n  handleChange = key => {\n    return event => {\n      this.setState({ [key]: event.target.value });\n    };\n  };\n\n  //update the current page\n  updateCurrentPage  = current => {\n    console.log(\"Updating the page\", current);\n    this.setState({currentPage: current.selected + 1});\n  };\n\n\n  //handle Query\n  handleQuery = async e => {\n    const data = new FormData();\n    const dataID = new FormData();\n    const grant = [];\n    const eligibility = [];\n    const locations = [];\n\n    data.append(\"orgID\", orgID)\n    console.log(\"in handleQuery\");\n    await fetch(this.REACT_APP_AF_BACKEND_URL + \"/manage/managegrants\", {\n      method: \"POST\",\n      body: data\n    })\n      .then(response => response.json())\n      .then(resJson => {\n         console.log(\"entered fuflfilled\", resJson);\n        if (resJson != null && resJson.grants != \"None\") {\n          dataID.append(\"grantIDs\", JSON.stringify(resJson.IDs));\n          for (let i = 0; i < resJson.grants.length; i++) {\n            grant.push(resJson.grants[i]);\n\n          }\n        }\n      });\n\n      console.log(\"Grant Value\", grant);\n\n    if (dataID.has(\"grantIDs\")) {\n      await fetch(this.REACT_APP_AF_BACKEND_URL + \"/search/eligibility\", {\n        method: \"POST\",\n        body: dataID\n      })\n        .then(response => response.json())\n        .then(resJson => {\n          // console.log(resJson);\n          if (resJson != null && resJson.eligibility != \"None\") {\n            for (let i = 0; i < resJson.eligibility.length; i++) {\n              eligibility.push(resJson.eligibility[i]);\n            }\n          }\n        });\n\n      await fetch(this.REACT_APP_AF_BACKEND_URL + \"/search/locations\", {\n        method: \"POST\",\n        body: dataID\n      })\n        .then(response => response.json())\n        .then(resJson => {\n          // console.log(resJson);\n          if (resJson != null && resJson.locations != \"None\") {\n            for (let i = 0; i < resJson.locations.length; i++) {\n              locations.push(resJson.locations[i]);\n            }\n          }\n        });\n    }\n\n    //call cards here\n\n    let grantResults = [];\n    // checking for grant id match and adding the funding status to grant array\n    let grantCopy = [];\n    grantCopy = grant;\n    for (let i = 0; i < grant.length; i++) {\n\n      if (grant[i].ID) {\n        let grantID = grant[i].ID;\n        let status = false;\n        await fetch(this.REACT_APP_AF_BACKEND_URL + \"/search/fundingStatus?grantID=\"+grantID, {\n          method: \"GET\",\n        }).then(response => {\n          status=response.ok;\n          return response.json();\n        })\n            .then(data => {\n              if  (status) {\n                if (data.status === \"OK\") {\n                  let grantsCopy = grant;\n                  let funding = data.fundingStatus[0].fundingStatus;\n                  console.log('data in status okay', funding);\n                  grantsCopy[i]['fundingStatus']= funding;\n                  grant[i]= grantCopy[i];\n                }\n\n              }\n              else {\n\n                // =>issue getting funding status\n              }\n            });\n            await fetch(this.REACT_APP_AF_BACKEND_URL + \"/manage/managedonates?grantID=\"+grantID, {\n              method: \"GET\",\n            }).then(response => {\n              status=response.ok;\n              return response.json();\n            })\n                .then(data => {\n                  if  (status) {\n                    console.log(\"The status returned\" , data.status);\n                    if (data.status === \"OK\") {\n                      console.log(\"Adding donate info\");\n                      let grantsCopy = grant;\n                      let donates = data.donates;\n                      console.log('data for number of people donated', donates);\n                      grantsCopy[i]['numPeopleDonated']= donates;\n                      grant[i]= grantCopy[i];\n                    }\n\n                  }\n                  else {\n\n                    // =>issue getting funding status\n                  }\n                });\n      };\n      grantResults.push({\n        grant: grant[i],\n        eligibility: eligibility[i],\n        locations: locations[i]\n      });\n    }\n\n    // console.log('so', grantResults);\n    this.state.grantCopyInfo = grantResults;\n    console.log(\"The Grant Results\");\n    console.log(grantResults);\n    this.setState({pageCount:grantResults.length/9 });\n    this.setState({ grants: grantResults });\n    let props = {grants: this.state.grants, handleChange: this.handleChange, handleFundingStatus: this.handleFundingStatus, currentPage: this.state.currentPage};\n    return props;\n  };\n  //handle hug funding status\n  //this function works and handle hug status value but is currently not being used\n  // due to async call not updating in frontend immediately\n  // handleFundingStatus = async () => {\n  //   let status = false;\n  //   await fetch(\n  //     \"http://localhost:4000/manage/fundingStatus?donorID=\" + userID,\n  //     {\n  //       method: \"GET\"\n  //     }\n  //   )\n  //     .then(response => {\n  //       status = response.ok;\n  //       return response.json();\n  //     })\n  //     .then(data => {});\n  // };\n  componentDidMount() {\n    if (!window.location.hash) {\n      //setting window location\n      const hugsOrg = this.handleQuery();\n      window.location.assign(window.location + \"#loaded\");\n      //using reload() method to reload web page\n    }\n  }\n\n  render() {\n    const donorHugs = [];\n    const props = {grants: this.state.grants, currentPage: this.state.currentPage};\n    return (\n      <div className=\"col\">\n        <div className=\"row mt-5\">\n          <div className=\"col\">\n\n              <div>{searchCards(props)}</div>\n              <div className=\"form-group row\">\n                <div className=\"col-6\" />\n              <ReactPaginate\n              previousLabel={'previous'}\n              nextLabel={'next'}\n              breakLabel={'...'}\n              breakClassName={'page-item'}\n              onPageChange={this.updateCurrentPage}\n              pageCount={this.state.pageCount}\n              marginPagesDisplayed={2}\n              pageRangeDisplayed={5}\n              containerClassName={'pagination'}\n              subContainerClassName={'pages pagination'}\n              activeClassName={'active'}\n            />\n            </div>\n            <RepresentingOrgIDContext.Consumer>\n              {value => <OrgIDVal id={value} />}\n            </RepresentingOrgIDContext.Consumer>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Manage;\n"]},"metadata":{},"sourceType":"module"}