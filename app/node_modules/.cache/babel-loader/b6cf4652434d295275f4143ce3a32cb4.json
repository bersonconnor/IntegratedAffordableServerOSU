{"ast":null,"code":"import _regeneratorRuntime from \"/home/ubuntu/Connor/Demo_OSU_Filemanager/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/ubuntu/Connor/Demo_OSU_Filemanager/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/ubuntu/Connor/Demo_OSU_Filemanager/app/src/pages/MainPages/Transactions/index.js\";\nimport React, { Component } from \"react\";\nimport ReactTable from \"react-table\";\nimport { AffordableClient } from \"affordable-client\";\nimport CollapseWithHeader from \"../../../components/CollapseWithHeader\";\nimport WithdrawButton from \"../../../components/Modal/WithdrawButton\";\nimport \"../Settings/scss/settings.scss\";\nimport \"./scss/transactions.scss\";\nimport \"../../../styles/buttons.css\";\nimport { UserType } from \"affordable-shared-models\";\n\nclass WithdrawButtonPannel extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showPopup: false\n    };\n  }\n\n  togglePopup() {\n    this.setState({\n      showPopup: !this.state.showPopup\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 7\n      }\n    }, this.props.usertype === UserType.DONOR ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-right\",\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(WithdrawButton, {\n      addToTable: this.props.addToTable,\n      usertype: this.props.usertype,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 15\n      }\n    })) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 13\n      }\n    }));\n  }\n\n}\n\nclass FilterByPannel extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      usertype: this.props.usertype\n    };\n    this.handleChecked = this.handleChecked.bind(this);\n  }\n\n  handleChecked(event) {\n    var target = event.target;\n    var value = target.type === \"checkbox\" ? target.checked : target.value;\n    var add = {};\n\n    switch (value) {\n      case 'filterDeposit':\n        add = {\n          id: 'type',\n          value: 'Deposit'\n        };\n        break;\n\n      case 'filterDonate':\n        add = {\n          id: 'type',\n          value: 'Donation'\n        };\n        break;\n\n      case 'filterWithdraw':\n        add = {\n          id: 'type',\n          value: 'Withdraw'\n        };\n        break;\n\n      case 'filterAwarded':\n        add = {\n          id: 'type',\n          value: 'Awarded'\n        };\n        break;\n    }\n\n    ;\n    this.props.changeFilter(add);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filterBy\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }, \"Filter By Type\"), this.props.usertype === UserType.DONOR ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filterBox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"radioContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, \"All\", /*#__PURE__*/React.createElement(\"input\", {\n      name: \"filter\",\n      value: \"any\",\n      type: \"radio\",\n      defaultChecked: true,\n      onClick: this.handleChecked,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"checkmark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"radioContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, \"Deposit\", /*#__PURE__*/React.createElement(\"input\", {\n      name: \"filter\",\n      value: \"filterDeposit\",\n      type: \"radio\",\n      onClick: this.handleChecked,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"checkmark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"radioContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }\n    }, \"Donation\", /*#__PURE__*/React.createElement(\"input\", {\n      name: \"filter\",\n      value: \"filterDonate\",\n      type: \"radio\",\n      onClick: this.handleChecked,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"checkmark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"radioContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }\n    }, \"Withdraw\", /*#__PURE__*/React.createElement(\"input\", {\n      name: \"filter\",\n      value: \"filterWithdraw\",\n      type: \"radio\",\n      onClick: this.handleChecked,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"checkmark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 15\n      }\n    }))) : this.props.usertype === UserType.RECIPIENT ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filterBox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"radioContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 15\n      }\n    }, \"All\", /*#__PURE__*/React.createElement(\"input\", {\n      name: \"filter\",\n      value: \"any\",\n      type: \"radio\",\n      defaultChecked: true,\n      onClick: this.handleChecked,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"checkmark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"radioContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 15\n      }\n    }, \"Awarded\", /*#__PURE__*/React.createElement(\"input\", {\n      name: \"filter\",\n      value: \"filterAwarded\",\n      type: \"radio\",\n      onClick: this.handleChecked,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"checkmark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"radioContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 15\n      }\n    }, \"Withdraw\", /*#__PURE__*/React.createElement(\"input\", {\n      name: \"filter\",\n      value: \"filterWithdraw\",\n      type: \"radio\",\n      onClick: this.handleChecked,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"checkmark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }))) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 15\n      }\n    }));\n  }\n\n}\n\nclass BalancePannel extends Component {\n  constructor(props) {\n    var _this;\n\n    super(props);\n    _this = this;\n\n    this.getBalance = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        var balance;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.client.getBalance(_this.state.username, _this.state.usertype);\n\n              case 2:\n                balance = _context.sent;\n\n                if (balance.success === \"Balance found\") {\n                  _this.formatBalance(balance.pendingBalance, balance.balance);\n                }\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    this.client = new AffordableClient();\n    this.state = {\n      client: AffordableClient,\n      username: this.props.username,\n      usertype: this.props.usertype,\n      pendingBalance: 0,\n      availableBalance: 0\n    };\n    this.getBalance();\n  }\n\n  componentDidMount() {\n    var _this2 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              //update balance every 5 secs   \n              _this2.checkBalance = setInterval(() => _this2.getBalance(), 5000);\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  }\n\n  componentWillUnmount() {\n    //stop updating balance when component unmounts\n    clearInterval(this.checkBalance);\n  }\n\n  formatBalance(pending, available) {\n    var p = pending.toLocaleString(undefined, {\n      minimumFractionDigits: 2\n    });\n    var a = available.toLocaleString(undefined, {\n      minimumFractionDigits: 2\n    });\n    this.setState({\n      pendingBalance: p,\n      availableBalance: a\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"balance\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pendingBalance\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }\n    }, \"Pending Balance\"), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"balance\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, \"$\", this.state.pendingBalance))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"availableBalance\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }\n    }, \"Available Balance\"), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"balance\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 13\n      }\n    }, \"$\", this.state.availableBalance))));\n  }\n\n}\n\nclass Transactions extends Component {\n  constructor(props) {\n    var _this3;\n\n    super(props);\n    _this3 = this;\n\n    this.getDonations = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e) {\n        var json;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return _this3.client.getDonations(_this3.state.username);\n\n              case 2:\n                json = _context3.sent;\n\n                if (json.success === \"Donations found\") {\n                  _this3.addToTable(json.donations);\n                }\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    this.getAdminAwarded = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e) {\n        var json;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return _this3.client.getAdminAwarded();\n\n              case 2:\n                json = _context4.sent;\n\n                if (json.success === \"Awarded found\") {\n                  _this3.addToTable(json.awarded);\n                }\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    this.getAwarded = /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e) {\n        var json;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return _this3.client.getAwarded(_this3.state.username);\n\n              case 2:\n                json = _context5.sent;\n\n                if (json.success === \"Awarded found\") {\n                  _this3.addToTable(json.awarded);\n                }\n\n              case 4:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      return function (_x4) {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n\n    this.getCardDeposit = /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(e) {\n        var json;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return _this3.client.getDeposit(_this3.state.username, true);\n\n              case 2:\n                json = _context6.sent;\n\n                if (json.success === \"Card Deposits found\") {\n                  _this3.addToTable(json.deposit);\n                }\n\n              case 4:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      return function (_x5) {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n\n    this.getBankDeposit = /*#__PURE__*/function () {\n      var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(e) {\n        var json;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return _this3.client.getDeposit(_this3.state.username, false);\n\n              case 2:\n                json = _context7.sent;\n\n                if (json.success === \"Bank Deposits found\") {\n                  _this3.addToTable(json.deposit);\n                }\n\n              case 4:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7);\n      }));\n\n      return function (_x6) {\n        return _ref6.apply(this, arguments);\n      };\n    }();\n\n    this.getWithdraw = /*#__PURE__*/function () {\n      var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(e) {\n        var json;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.next = 2;\n                return _this3.client.getWithdraw(_this3.state.username, _this3.state.usertype, true);\n\n              case 2:\n                json = _context8.sent;\n\n                if (json.success === \"Withdrawals found\") {\n                  _this3.addToTable(json.withdraw);\n                }\n\n              case 4:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8);\n      }));\n\n      return function (_x7) {\n        return _ref7.apply(this, arguments);\n      };\n    }();\n\n    this.getBankWithdraw = /*#__PURE__*/function () {\n      var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(e) {\n        var json;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.next = 2;\n                return _this3.client.getWithdraw(_this3.state.username, _this3.state.usertype, false);\n\n              case 2:\n                json = _context9.sent;\n\n                if (json.success === \"Withdrawals found\") {\n                  _this3.addToTable(json.withdraw);\n                }\n\n              case 4:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9);\n      }));\n\n      return function (_x8) {\n        return _ref8.apply(this, arguments);\n      };\n    }();\n\n    this.client = new AffordableClient();\n    this.state = {\n      userID: this.props.userId,\n      username: this.props.user,\n      usertype: this.props.userType,\n      transactions: [],\n      filter: [],\n      show: false\n    };\n    this.addToTable = this.addToTable.bind(this);\n    this.changeFilter = this.changeFilter.bind(this);\n\n    if (this.state.usertype === UserType.DONOR) {\n      this.getDonations();\n      this.getCardDeposit();\n      this.getBankDeposit();\n    }\n\n    if (this.state.usertype === UserType.RECIPIENT) {\n      this.getAwarded();\n    }\n\n    if (\"admin\".localeCompare(this.state.username) === 0) {\n      console.log(\"Show\");\n      this.setState({\n        show: true\n      });\n      this.getAdminAwarded();\n    }\n\n    this.getWithdraw();\n    this.getBankWithdraw();\n  }\n\n  componentDidMount() {\n    var _this4 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n      var time;\n      return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              time = 5000; //update every 5 secs   \n\n              _this4.checkAll = setInterval(() => _this4.syncAll(), time);\n\n            case 2:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10);\n    }))();\n  }\n\n  componentWillUnmount() {\n    //stop updating\n    clearInterval(this.checkAll);\n  }\n\n  syncAll() {\n    if (this.state.usertype === UserType.DONOR) {\n      this.getDonations();\n      this.getCardDeposit();\n      this.getBankDeposit();\n    }\n\n    if (this.state.usertype === UserType.RECIPIENT) {\n      this.getAwarded();\n    }\n\n    if (\"admin\".localeCompare(this.state.userName) === 0) {\n      this.getAdminAwarded();\n    }\n\n    this.getWithdraw();\n    this.getBankWithdraw();\n  }\n\n  formatTimestamp(item) {\n    for (var i = 0; i < item.length; i++) {\n      var splitting = item[i].date.split('T');\n      var date = splitting[0];\n      var time = splitting[1].split('.')[0];\n      item[i].date = date + \" \" + time;\n    }\n  }\n\n  formatAmount(item) {\n    for (var i = 0; i < item.length; i++) {\n      var amount = item[i].amount;\n      var dollar = amount.toLocaleString(undefined, {\n        minimumFractionDigits: 2\n      });\n      ;\n      item[i].amount = \"$\" + dollar;\n    }\n  }\n\n  checkDuplicates(cur, newer) {\n    var type = newer[0][\"type\"]; // Get all those with that type\n\n    var list = cur.filter((val, index) => {\n      return val[\"type\"] === type;\n    }); // Remove duplicates\n\n    var result = newer.filter(function (val) {\n      return list.every(function (obj) {\n        return obj[\"date\"] !== val[\"date\"];\n      });\n    });\n    return result;\n  } // Add items to transaction table\n\n\n  addToTable(newTransactions) {\n    var currentTransactions = this.state.transactions; // Formatting \n\n    this.formatTimestamp(newTransactions);\n    this.formatAmount(newTransactions); // Removing duplicates\n\n    newTransactions = this.checkDuplicates(currentTransactions, newTransactions); // Updating\n\n    var updatedTransactions = newTransactions.concat(currentTransactions);\n    this.setState({\n      transactions: updatedTransactions\n    });\n  }\n\n  changeFilter(item) {\n    this.setState({\n      filter: [item]\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"move-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sectionBarStyle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(FilterByPannel, {\n      usertype: this.state.usertype,\n      changeFilter: this.changeFilter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(BalancePannel, {\n      username: this.state.username,\n      usertype: this.state.usertype,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"infoPanel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 15\n      }\n    }, \"INFORMATION\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 15\n      }\n    }, \"Before attempting to commit a transaction, make sure to have a saved payment method in the Banking Information tab in the Settings page.\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bot-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CollapseWithHeader, {\n      title: \"Transaction History\",\n      open: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 11\n      }\n    }, \"admin\".localeCompare(this.state.username) === 0 ? /*#__PURE__*/React.createElement(ReactTable, {\n      data: this.state.transactions,\n      columns: [{\n        headerClassName: \"apply-table-thead\",\n        Header: \"Date\",\n        accessor: \"date\",\n        style: {\n          whiteSpace: \"unset\"\n        }\n      }, {\n        headerClassName: \"apply-table-thead\",\n        Header: \"Type\",\n        accessor: \"type\",\n        style: {\n          whiteSpace: \"unset\"\n        }\n      }, {\n        headerClassName: \"apply-table-thead\",\n        Header: \"Name\",\n        accessor: \"name\",\n        style: {\n          whiteSpace: \"unset\"\n        },\n        show: true\n      }, {\n        headerClassName: \"apply-table-thead\",\n        Header: \"Amount\",\n        accessor: \"amount\",\n        style: {\n          whiteSpace: \"unset\"\n        }\n      }, {\n        headerClassName: \"apply-table-thead\",\n        Header: \"Status\",\n        accessor: \"status\",\n        style: {\n          whiteSpace: \"unset\"\n        }\n      }],\n      showPageSizeOptions: false,\n      defaultPageSize: 10,\n      filtered: this.state.filter,\n      sorting: 0,\n      sortable: true,\n      className: \"-striped -highlight\",\n      style: {\n        height: \"400px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 13\n      }\n    }) : /*#__PURE__*/React.createElement(ReactTable, {\n      data: this.state.transactions,\n      columns: [{\n        headerClassName: \"apply-table-thead\",\n        Header: \"Date\",\n        accessor: \"date\",\n        style: {\n          whiteSpace: \"unset\"\n        }\n      }, {\n        headerClassName: \"apply-table-thead\",\n        Header: \"Type\",\n        accessor: \"type\",\n        style: {\n          whiteSpace: \"unset\"\n        }\n      }, {\n        headerClassName: \"apply-table-thead\",\n        Header: \"Amount\",\n        accessor: \"amount\",\n        style: {\n          whiteSpace: \"unset\"\n        }\n      }, {\n        headerClassName: \"apply-table-thead\",\n        Header: \"Status\",\n        accessor: \"status\",\n        style: {\n          whiteSpace: \"unset\"\n        }\n      }],\n      showPageSizeOptions: false,\n      defaultPageSize: 10,\n      filtered: this.state.filter,\n      sorting: 0,\n      sortable: true,\n      className: \"-striped -highlight\",\n      style: {\n        height: \"400px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(WithdrawButtonPannel, {\n      usertype: this.state.usertype,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default Transactions;","map":{"version":3,"sources":["/home/ubuntu/Connor/Demo_OSU_Filemanager/app/src/pages/MainPages/Transactions/index.js"],"names":["React","Component","ReactTable","AffordableClient","CollapseWithHeader","WithdrawButton","UserType","WithdrawButtonPannel","constructor","props","state","showPopup","togglePopup","setState","render","usertype","DONOR","addToTable","FilterByPannel","handleChecked","bind","event","target","value","type","checked","add","id","changeFilter","RECIPIENT","BalancePannel","getBalance","e","client","username","balance","success","formatBalance","pendingBalance","availableBalance","componentDidMount","checkBalance","setInterval","componentWillUnmount","clearInterval","pending","available","p","toLocaleString","undefined","minimumFractionDigits","a","Transactions","getDonations","json","donations","getAdminAwarded","awarded","getAwarded","getCardDeposit","getDeposit","deposit","getBankDeposit","getWithdraw","withdraw","getBankWithdraw","userID","userId","user","userType","transactions","filter","show","localeCompare","console","log","time","checkAll","syncAll","userName","formatTimestamp","item","i","length","splitting","date","split","formatAmount","amount","dollar","checkDuplicates","cur","newer","list","val","index","result","every","obj","newTransactions","currentTransactions","updatedTransactions","concat","headerClassName","Header","accessor","style","whiteSpace","height"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport ReactTable from \"react-table\";\nimport { AffordableClient } from \"affordable-client\";\nimport CollapseWithHeader from \"../../../components/CollapseWithHeader\";\nimport WithdrawButton from \"../../../components/Modal/WithdrawButton\";\n\nimport \"../Settings/scss/settings.scss\";\nimport \"./scss/transactions.scss\";\nimport \"../../../styles/buttons.css\";\n\nimport { UserType } from \"affordable-shared-models\";\n\nclass WithdrawButtonPannel extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { showPopup: false };\n  }\n\n  togglePopup() {\n    this.setState({\n      showPopup: !this.state.showPopup\n    });\n  }\n  render() {\n    return (\n      <div>\n        {/*Donor vs recipient buttons on bottom*/}\n        {\n          this.props.usertype === UserType.DONOR ?\n            <div className=\"text-right\" align=\"right\">\n              <WithdrawButton addToTable={this.props.addToTable} usertype={this.props.usertype} />\n            </div>\n            :\n            <div />\n        }\n      </div>\n    );\n  }\n}\n\nclass FilterByPannel extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      usertype: this.props.usertype,\n    };\n\n    this.handleChecked = this.handleChecked.bind(this);\n  }\n\n  handleChecked(event) {\n    const target = event.target;\n    const value = target.type === \"checkbox\" ? target.checked : target.value;\n\n    var add = {};\n\n    switch (value) {\n      case 'filterDeposit':\n        add = { id: 'type', value: 'Deposit' };\n        break;\n      case 'filterDonate':\n        add = { id: 'type', value: 'Donation' };\n        break;\n      case 'filterWithdraw':\n        add = { id: 'type', value: 'Withdraw' };\n        break;\n      case 'filterAwarded':\n        add = { id: 'type', value: 'Awarded' };\n        break;\n    };\n\n    this.props.changeFilter(add);\n  }\n\n  render() {\n    return (\n      <div className=\"filterBy\">\n        <p>Filter By Type</p>\n        {/*Donor vs recipient buttons on bottom*/}\n        {this.props.usertype === UserType.DONOR ?\n          <div className=\"filterBox\">\n            <label className=\"radioContainer\">All\n              <input name=\"filter\" value=\"any\" type=\"radio\" defaultChecked onClick={this.handleChecked} />\n              <span className=\"checkmark\"></span>\n            </label>\n            <label className=\"radioContainer\">Deposit\n              <input name=\"filter\" value=\"filterDeposit\" type=\"radio\" onClick={this.handleChecked} />\n              <span className=\"checkmark\"></span>\n            </label>\n\n            <label className=\"radioContainer\">Donation\n              <input name=\"filter\" value=\"filterDonate\" type=\"radio\" onClick={this.handleChecked} />\n              <span className=\"checkmark\"></span>\n            </label>\n\n            <label className=\"radioContainer\">Withdraw\n              <input name=\"filter\" value=\"filterWithdraw\" type=\"radio\" onClick={this.handleChecked} />\n              <span className=\"checkmark\"></span>\n            </label>\n          </div>\n\n          : this.props.usertype === UserType.RECIPIENT ?\n            <div className=\"filterBox\">\n              <label className=\"radioContainer\">All\n              <input name=\"filter\" value=\"any\" type=\"radio\" defaultChecked onClick={this.handleChecked} />\n                <span className=\"checkmark\"></span>\n              </label>\n              <label className=\"radioContainer\">Awarded\n                <input name=\"filter\" value=\"filterAwarded\" type=\"radio\" onClick={this.handleChecked} />\n                <span className=\"checkmark\"></span>\n              </label>\n\n              <label className=\"radioContainer\">Withdraw\n                <input name=\"filter\" value=\"filterWithdraw\" type=\"radio\" onClick={this.handleChecked} />\n                <span className=\"checkmark\"></span>\n              </label>\n            </div>\n\n            : <div />\n        }\n      </div>\n    );\n  }\n}\n\nclass BalancePannel extends Component {\n  constructor(props) {\n    super(props);\n    this.client = new AffordableClient();\n    this.state = {\n      client: AffordableClient,\n      username: this.props.username,\n      usertype: this.props.usertype,\n      pendingBalance: 0,\n      availableBalance: 0\n    };\n    this.getBalance();  \n  }\n\n  async componentDidMount() {\n    //update balance every 5 secs   \n    this.checkBalance = setInterval(() => this.getBalance(), 5000);\n  }\n\n  componentWillUnmount() {\n    //stop updating balance when component unmounts\n    clearInterval(this.checkBalance);\n  }\n\n  formatBalance(pending, available) {\n    var p = pending.toLocaleString(undefined, { minimumFractionDigits: 2 });\n    var a = available.toLocaleString(undefined, { minimumFractionDigits: 2 });\n    this.setState({\n      pendingBalance: p,\n      availableBalance: a\n    });\n  }\n\n  getBalance = async (e) => {\n    var balance = await this.client.getBalance(this.state.username, this.state.usertype);\n    if(balance.success === \"Balance found\"){\n      this.formatBalance(balance.pendingBalance, balance.balance);\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"balance\">\n        <div className=\"pendingBalance\">\n          <p>Pending Balance</p>\n          <div id=\"balance\">\n            <span>${this.state.pendingBalance}</span>\n          </div>\n        </div>\n        <div className=\"availableBalance\">\n          <p>Available Balance</p>\n          <div id=\"balance\">\n            <span>${this.state.availableBalance}</span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass Transactions extends Component {\n  constructor(props) {\n    super(props);\n\n    this.client = new AffordableClient();\n    this.state = {\n      userID: this.props.userId,\n      username: this.props.user,\n      usertype: this.props.userType,\n      transactions: [],\n      filter: [], \n      show: false\n    };\n\n    this.addToTable = this.addToTable.bind(this);\n    this.changeFilter = this.changeFilter.bind(this);\n\n    if (this.state.usertype === UserType.DONOR) {\n      this.getDonations();\n      this.getCardDeposit();\n      this.getBankDeposit();\n    }\n    if (this.state.usertype === UserType.RECIPIENT) {\n      this.getAwarded();\n    }\n\n    if (\"admin\".localeCompare(this.state.username) === 0){\n      console.log(\"Show\")\n      this.setState({show: true});\n      this.getAdminAwarded();\n    }\n    this.getWithdraw();\n    this.getBankWithdraw();\n  }\n\n  async componentDidMount() {\n    var time = 5000;\n    //update every 5 secs   \n    this.checkAll = setInterval(() => this.syncAll(), time);\n\n  }\n\n  componentWillUnmount() {\n    //stop updating\n    clearInterval(this.checkAll);\n  }\n\n  syncAll() {\n    if (this.state.usertype === UserType.DONOR) {\n      this.getDonations();\n      this.getCardDeposit();\n      this.getBankDeposit();\n    }\n    if (this.state.usertype === UserType.RECIPIENT) {\n      this.getAwarded();\n    }\n    if (\"admin\".localeCompare(this.state.userName) === 0){\n      this.getAdminAwarded();\n    }\n    this.getWithdraw();\n    this.getBankWithdraw();\n  }\n\n  getDonations = async (e) => {\n    var json = await this.client.getDonations(this.state.username);\n    if (json.success === \"Donations found\") {\n      this.addToTable(json.donations);\n    }\n  }\n\n  getAdminAwarded = async (e) => {\n    var json = await this.client.getAdminAwarded();\n    if (json.success === \"Awarded found\") {\n      this.addToTable(json.awarded);\n    }\n  }\n\n  getAwarded = async (e) => {\n    var json = await this.client.getAwarded(this.state.username);\n    if (json.success === \"Awarded found\") {\n      this.addToTable(json.awarded);\n    }\n  }\n\n  getCardDeposit = async (e) => {\n    var json = await this.client.getDeposit(this.state.username, true);\n    if (json.success === \"Card Deposits found\") {\n      this.addToTable(json.deposit);\n    }\n  }\n\n  getBankDeposit = async (e) => {\n    var json = await this.client.getDeposit(this.state.username, false);\n    if (json.success === \"Bank Deposits found\") {\n      this.addToTable(json.deposit);\n    }\n  }\n\n  getWithdraw = async (e) => {\n    var json = await this.client.getWithdraw(this.state.username, this.state.usertype, true);\n    if (json.success === \"Withdrawals found\") {\n      this.addToTable(json.withdraw);\n    }\n  }\n\n  getBankWithdraw = async (e) => {\n    var json = await this.client.getWithdraw(this.state.username, this.state.usertype, false);\n    if (json.success === \"Withdrawals found\") {\n      this.addToTable(json.withdraw);\n    }\n  }\n\n  formatTimestamp(item) {\n    for (let i = 0; i < item.length; i++) {\n      let splitting = item[i].date.split('T');\n      let date = splitting[0];\n      let time = splitting[1].split('.')[0];\n\n      item[i].date = date + \" \" + time;\n    }\n  }\n\n  formatAmount(item) {\n    for (let i = 0; i < item.length; i++) {\n      let amount = item[i].amount;\n      let dollar = amount.toLocaleString(undefined, { minimumFractionDigits: 2 });;\n\n      item[i].amount = \"$\" + dollar;\n    }\n  }\n\n  checkDuplicates (cur, newer){\n    var type = newer[0][\"type\"];\n    \n    // Get all those with that type\n    var list = cur.filter((val, index)=>{\n      return val[\"type\"] === type;\n    });\n\n    // Remove duplicates\n    var result = newer.filter(\n      function(val){\n        return list.every(\n          function(obj){\n            return obj[\"date\"] !== val[\"date\"] \n          }\n        )\n      }\n    );\n\n    return result;\n  }\n\n  // Add items to transaction table\n  addToTable(newTransactions) {\n    var currentTransactions = this.state.transactions;\n\n    // Formatting \n    this.formatTimestamp(newTransactions);\n    this.formatAmount(newTransactions);\n\n    // Removing duplicates\n    newTransactions = this.checkDuplicates(currentTransactions, newTransactions);\n    \n    // Updating\n    var updatedTransactions = newTransactions.concat(currentTransactions);\n    this.setState({\n      transactions: updatedTransactions\n    });\n  }\n\n  changeFilter(item) {\n    this.setState({\n      filter: [item]\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"col\">\n        <div className=\"move-right\">\n          <div className=\"sectionBarStyle\">\n            <FilterByPannel usertype={this.state.usertype} changeFilter={this.changeFilter} />\n            <BalancePannel username={this.state.username} usertype={this.state.usertype} />\n            <div className=\"infoPanel\">\n              <div>INFORMATION</div>\n              <p>\n                Before attempting to commit a transaction, make sure to have a\n                saved payment method in the Banking Information tab in the\n                Settings page.\n                </p>\n            </div>\n          </div>\n        </div>\n        <div className=\"bot-col\">\n          <CollapseWithHeader title=\"Transaction History\" open={true}>\n            {\"admin\".localeCompare(this.state.username) === 0? \n            <ReactTable\n              data={this.state.transactions}\n              columns={[\n                {\n                  headerClassName: \"apply-table-thead\",\n                  Header: \"Date\",\n                  accessor: \"date\",\n                  style: { whiteSpace: \"unset\" }\n                },\n                {\n                  headerClassName: \"apply-table-thead\",\n                  Header: \"Type\",\n                  accessor: \"type\",\n                  style: { whiteSpace: \"unset\" }\n                },\n                {\n                  headerClassName: \"apply-table-thead\",\n                  Header: \"Name\",\n                  accessor: \"name\",\n                  style: { whiteSpace: \"unset\" },\n                  show: true\n                },\n                {\n                  headerClassName: \"apply-table-thead\",\n                  Header: \"Amount\",\n                  accessor: \"amount\",\n                  style: { whiteSpace: \"unset\" }\n                },\n                {\n                  headerClassName: \"apply-table-thead\",\n                  Header: \"Status\",\n                  accessor: \"status\",\n                  style: { whiteSpace: \"unset\" }\n                }\n              ]}\n              showPageSizeOptions={false}\n              defaultPageSize={10}\n\n              filtered={this.state.filter}\n              sorting={0}\n              sortable={true}\n\n              className=\"-striped -highlight\"\n              style={{\n                height: \"400px\",\n              }}\n            />\n            :\n            <ReactTable\n              data={this.state.transactions}\n              columns={[\n                {\n                  headerClassName: \"apply-table-thead\",\n                  Header: \"Date\",\n                  accessor: \"date\",\n                  style: { whiteSpace: \"unset\" }\n                },\n                {\n                  headerClassName: \"apply-table-thead\",\n                  Header: \"Type\",\n                  accessor: \"type\",\n                  style: { whiteSpace: \"unset\" }\n                },\n                {\n                  headerClassName: \"apply-table-thead\",\n                  Header: \"Amount\",\n                  accessor: \"amount\",\n                  style: { whiteSpace: \"unset\" }\n                },\n                {\n                  headerClassName: \"apply-table-thead\",\n                  Header: \"Status\",\n                  accessor: \"status\",\n                  style: { whiteSpace: \"unset\" }\n                }\n              ]}\n              showPageSizeOptions={false}\n              defaultPageSize={10}\n\n              filtered={this.state.filter}\n              sorting={0}\n              sortable={true}\n\n              className=\"-striped -highlight\"\n              style={{\n                height: \"400px\",\n              }}\n            />\n            }\n          </CollapseWithHeader>\n          <WithdrawButtonPannel usertype={this.state.usertype} />\n        </div>\n\n      </div>\n    );\n  }\n}\n\nexport default Transactions;"]},"metadata":{},"sourceType":"module"}